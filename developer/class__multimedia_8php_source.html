<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Gino Multimedia:  File sorgente class_multimedia.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logotto_100px.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Gino Multimedia
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Modulo di gestione di contenuti multimediali per Gino CMS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generato da Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Cerca');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Pagina&#160;Principale</span></a></li>
      <li><a href="modules.html"><span>Moduli</span></a></li>
      <li><a href="annotated.html"><span>Strutture&#160;dati</span></a></li>
      <li class="current"><a href="files.html"><span>File</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Cerca" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Elenco&#160;dei&#160;file</span></a></li>
      <li><a href="globals.html"><span>Elementi&#160;globali</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Tutto</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Strutture dati</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>File</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Funzioni</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variabili</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Gruppi</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pagine</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">class_multimedia.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="class__multimedia_8php.html">Vai alla documentazione di questo file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaLicense.php&#39;</span>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaVideoPlatform.php&#39;</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaSlider.php&#39;</span>);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaGallery.php&#39;</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaItem.php&#39;</span>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaAudio.php&#39;</span>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaVideo.php&#39;</span>);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaImage.php&#39;</span>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaImageField.php&#39;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;require_once(<span class="stringliteral">&#39;class.multimediaTag.php&#39;</span>);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="code" href="class__multimedia_8php.html#a3c73713ac6b7171048f04f324889ce51">   55</a></span>&#160;define(<span class="stringliteral">&#39;AUDIO_CHOICE&#39;</span>, 3);</div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="code" href="class__multimedia_8php.html#ae84beed6ddd37175866793d1b839b9ae">   56</a></span>&#160;define(<span class="stringliteral">&#39;VIDEO_CHOICE&#39;</span>, 2);</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="code" href="class__multimedia_8php.html#a4b1c2af05df3dd8c666bd40ae0fb4357">   57</a></span>&#160;define(<span class="stringliteral">&#39;IMAGE_CHOICE&#39;</span>, 1);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="code" href="classmultimedia.html">   78</a></span>&#160;<span class="keyword">class </span><a class="code" href="classmultimedia.html" title="Classe controller per la gestione di contenuti multimediali.">multimedia</a> <span class="keyword">extends</span> AbstractEvtClass {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="code" href="classmultimedia.html#ae208776e4563126d5b901a94a06f9fee">   83</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#ae208776e4563126d5b901a94a06f9fee" title="titolo della view lista gallerie">$_title_list_galleries</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="code" href="classmultimedia.html#ac0369c83339dd8283342ff4dfbc5dac9">   88</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#ac0369c83339dd8283342ff4dfbc5dac9" title="titolo della view mappa">$_title_map</a>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="code" href="classmultimedia.html#a528e8dc67b24915b9a6f671fa61163bd">   93</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a528e8dc67b24915b9a6f671fa61163bd" title="titolo della view slider">$_title_slider</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="code" href="classmultimedia.html#a39978f8524dd1859f0efdc637b19c316">   98</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a39978f8524dd1859f0efdc637b19c316" title="titolo della view box">$_title_box</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="code" href="classmultimedia.html#ae69a4d75b6b27123f8789fc85ea58aa0">  103</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#ae69a4d75b6b27123f8789fc85ea58aa0" title="Dimensione in px del lato lungo della thumb.">$_thumb_dimension</a>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="code" href="classmultimedia.html#a3bb375a1ea1a54a0fda3ea2abf48c1a6">  108</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a3bb375a1ea1a54a0fda3ea2abf48c1a6" title="Dimensione in px della larghezza massima delle immagini.">$_image_max_width</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="code" href="classmultimedia.html#a2005794e4e79ff8458f92e98f8daf4a0">  113</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a2005794e4e79ff8458f92e98f8daf4a0" title="Template della galleria promossa nella vista box.">$_box_promoted_code</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="code" href="classmultimedia.html#a4ca099e0909e82a2a525ad2bf8f25bef">  118</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a4ca099e0909e82a2a525ad2bf8f25bef" title="Template della vista box.">$_box_tpl_code</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="code" href="classmultimedia.html#adc13f820ba2e2fd1716d73425778406a">  123</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#adc13f820ba2e2fd1716d73425778406a" title="Numero di gallerie nella vista box.">$_box_num_galleries</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="code" href="classmultimedia.html#aa906a8d8b5a5b66e4b45b1e1863801ff">  128</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#aa906a8d8b5a5b66e4b45b1e1863801ff" title="Template della vista elenco gallerie.">$_list_galleries_tpl</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="code" href="classmultimedia.html#af3193f825e921ef2b5948d4ce0496c51">  133</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#af3193f825e921ef2b5948d4ce0496c51" title="Numero di colonne nella vista elenco gallerie con tabella thumb.">$_list_galleries_tpl2_cols</a>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="code" href="classmultimedia.html#a232dc899e4b5848642bec6959dc4046e">  138</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a232dc899e4b5848642bec6959dc4046e" title="Numero di elementi per pagina nella vista elenco gallerie.">$_list_galleries_tpl_ifp</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno"><a class="code" href="classmultimedia.html#ac62c7b085e63a62335ad78e6226b2436">  143</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#ac62c7b085e63a62335ad78e6226b2436" title="Numero di media per pagina nella vista galleria.">$_gallery_ifp</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="code" href="classmultimedia.html#a72dd38a38666b9271cca5b0cbf775820">  148</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a72dd38a38666b9271cca5b0cbf775820" title="Template della cella della tabella nel layout 2 n thumb per riga.">$_list_galleries_tpl2_code</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="code" href="classmultimedia.html#a73c5d1306bdfde1e39ef24d45ab84734">  153</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a73c5d1306bdfde1e39ef24d45ab84734" title="Template della riga della tabella nel layout 1 galleria per riga.">$_list_galleries_tpl1_code</a>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">         * @brief Peso campo nome galleria nella ricerca gallerie</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="code" href="classmultimedia.html#a7323edf49b95df4314f78b11a7b6c01b">  158</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a7323edf49b95df4314f78b11a7b6c01b">$_relevance_gallery_gname</a>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">         * @brief Peso campo descrizione galleria nella ricerca gallerie</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="code" href="classmultimedia.html#adfed59f39e593a090c767cdbf1ba1d42">  163</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#adfed59f39e593a090c767cdbf1ba1d42">$_relevance_gallery_gdescription</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">         * @brief Peso campo nome media nella ricerca gallerie</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="code" href="classmultimedia.html#a56ed9f6adc62ee2d7f5c29847f73f371">  168</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a56ed9f6adc62ee2d7f5c29847f73f371">$_relevance_gallery_mname</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">         * @brief Peso campo descrizione media nella ricerca gallerie</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="code" href="classmultimedia.html#a02ba3737b052a222b9e41af3cfeecf74">  173</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a02ba3737b052a222b9e41af3cfeecf74">$_relevance_gallery_mdescription</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">         * @brief Peso campo tags media nella ricerca gallerie</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="code" href="classmultimedia.html#a3a5093baf605a47102c45245d82dbb82">  178</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a3a5093baf605a47102c45245d82dbb82">$_relevance_gallery_mtags</a>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">         * @brief Peso campo nome media nella ricerca media</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="code" href="classmultimedia.html#ac9ea8adc415c4b4fe81844ea63c0ca73">  183</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#ac9ea8adc415c4b4fe81844ea63c0ca73">$_relevance_media_mname</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">         * @brief Peso campo descrizione media nella ricerca media</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="code" href="classmultimedia.html#ae21e3d77ac4d93957f81ac0af79702cf">  188</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#ae21e3d77ac4d93957f81ac0af79702cf">$_relevance_media_mdescription</a>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">         * @brief Peso campo tags media nella ricerca media</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="code" href="classmultimedia.html#a5e05940d06b6a4e179e644cd9091f093">  193</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a5e05940d06b6a4e179e644cd9091f093">$_relevance_media_mtags</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="code" href="classmultimedia.html#ad431c008ae0d62ab7e2583e6407c5c22">  198</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#ad431c008ae0d62ab7e2583e6407c5c22" title="Tabella di opzioni.">$_tbl_opt</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="code" href="classmultimedia.html#a357930ca67eed44ed1bb278c30e7e921">  203</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a357930ca67eed44ed1bb278c30e7e921" title="Tabella di associazione utenti/gruppi.">$_tbl_usr</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="code" href="classmultimedia.html#af4ae5ba8c860aebd05cb11677fdaadfd">  209</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#af4ae5ba8c860aebd05cb11677fdaadfd">$_group_1</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno"><a class="code" href="classmultimedia.html#a8e125a8f80857f0d6fd14ebce01b5257">  215</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a8e125a8f80857f0d6fd14ebce01b5257">$_group_2</a>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="code" href="classmultimedia.html#a1bebdc689c84eee59ad24c77e5531762">  220</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a1bebdc689c84eee59ad24c77e5531762" title="Oggetto di tipo options per la gestione automatica delle opzioni.">$_options</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno"><a class="code" href="classmultimedia.html#a4ba183a2d863d65e42a61e879e34b2a4">  225</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classmultimedia.html#a4ba183a2d863d65e42a61e879e34b2a4" title="Elenco di proprietà delle opzioni per la creazione del form delle opzioni.">$_optionsLabels</a>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="code" href="classmultimedia.html#a7f5ace595f18b0213170cf8cf69c3b92">  230</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="classmultimedia.html#a7f5ace595f18b0213170cf8cf69c3b92" title="Valori dei default per le opzioni.">$_optionsValue</a>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">         * Parametro action letto da url </span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="code" href="classmultimedia.html#a98d6222017265001c7eb9bcd44ad8ae7">  235</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a98d6222017265001c7eb9bcd44ad8ae7">$_action</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">         * Parametro block letto da url </span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="code" href="classmultimedia.html#a6a9b671eef2739e0495fccf247f1af33">  240</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a6a9b671eef2739e0495fccf247f1af33">$_block</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="code" href="classmultimedia.html#a2219dca850d51e934fe989d494565482">  245</a></span>&#160;        <span class="keyword">private</span> <a class="code" href="classmultimedia.html#a2219dca850d51e934fe989d494565482" title="Percorso assoluto alla directory contenente le viste.">$_view_dir</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="code" href="classmultimedia.html#a0718404b17eb8177279a5c06ee594e6b">  253</a></span>&#160;        <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a0718404b17eb8177279a5c06ee594e6b" title="Costruisce un&#39;istanza di tipo multimedia.">__construct</a>($mdlId) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                parent::__construct();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                $this-&gt;_instance = $mdlId;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                $this-&gt;_instanceName = $this-&gt;_db-&gt;getFieldFromId($this-&gt;_tbl_module, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;id&#39;</span>, $this-&gt;_instance);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                $this-&gt;_instanceLabel = $this-&gt;_db-&gt;getFieldFromId($this-&gt;_tbl_module, <span class="stringliteral">&#39;label&#39;</span>, <span class="stringliteral">&#39;id&#39;</span>, $this-&gt;_instance);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                $this-&gt;_data_dir = $this-&gt;_data_dir.$this-&gt;_os.$this-&gt;_instanceName;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                $this-&gt;_data_www = $this-&gt;_data_www.<span class="stringliteral">&quot;/&quot;</span>.$this-&gt;_instanceName;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                $this-&gt;_tbl_opt = <span class="stringliteral">&#39;multimedia_opt&#39;</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                $this-&gt;_tbl_usr = <span class="stringliteral">&#39;multimedia_usr&#39;</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                $this-&gt;setAccess();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                $this-&gt;<a class="code" href="classmultimedia.html#aab72afe17ec1295cd3e4fa689f876225" title="Setter per le proprietà group.">setGroups</a>();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                $this-&gt;_view_dir = dirname(__FILE__).OS.<span class="stringliteral">&#39;view&#39;</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                $box_promoted_code_dft = <span class="stringliteral">&quot;&lt;div class=\&quot;thumbitem\&quot;&gt;{{ thumb }}&lt;div style=\&quot;font-size: 1.1em; margin-top: 5px;margin-bottom: 8px;\&quot;&gt;{{ name|link }}&lt;/div&gt;&lt;/div&gt;&quot;</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                $box_tpl_code_dft = <span class="stringliteral">&quot;&lt;div class=\&quot;thumbitem\&quot;&gt;{{ thumb }}&lt;div style=\&quot;font-size: 1.1em; margin-top: 5px;margin-bottom: 8px;\&quot;&gt;{{ name|link }}&lt;/div&gt;&lt;/div&gt;&quot;</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                $tpl2_cell_dft = <span class="stringliteral">&quot;{{ thumb }}&lt;p&gt;{{ name|link }}&lt;/p&gt;&quot;</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                $tpl1_row_dft = <span class="stringliteral">&quot;&lt;td class=\&quot;thumb\&quot;&gt;{{ thumb }}&lt;/td&gt;&lt;td&gt;&lt;span class=\&quot;date\&quot;&gt;{{ last_edit_date }}&lt;/span&gt;&lt;br /&gt;{{ name|link }}{{ description|chars:200 }}&lt;/td&gt;&quot;</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                $gallery_code_exp = _(<span class="stringliteral">&quot;Le proprietà della galleria devono essere inserite all&#39;interno di doppie parentesi {{ proprietà }}. Proprietà disponibili:&lt;br/&gt;&quot;</span>);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;ul&gt;&quot;</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;thumb&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;thumbnail&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;thumb_url&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;thumbnail url&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;name&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;nome&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;description&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;descrizione&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;insertion_date&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;data di creazione della galleria&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;last_edit_date&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;data di ultimo inserimento immagine&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;/ul&gt;&quot;</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                $gallery_code_exp .= _(<span class="stringliteral">&quot;Inoltre si possono eseguire dei filtri o aggiungere link facendo seguire il nome della proprietà dai caratteri &#39;|filtro&#39;. Disponibili:&lt;br /&gt;&quot;</span>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;ul&gt;&quot;</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;&lt;span style=&#39;text-style: normal&#39;&gt;|link&lt;/span&gt;&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;aggiunge il link che porta alla vista della galleria alla proprietà&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;&lt;span style=&#39;text-style: normal&#39;&gt;|chars:n&lt;/span&gt;&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;mostra solo n caratteri della proprietà&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;li&gt;&lt;b&gt;&lt;span style=&#39;text-style: normal&#39;&gt;thumb|class:name_class&lt;/span&gt;&lt;/b&gt;: &quot;</span>._(<span class="stringliteral">&#39;aggiunge la classe name_class alla thumb&#39;</span>).<span class="stringliteral">&quot;&lt;/li&gt;&quot;</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                $gallery_code_exp .= <span class="stringliteral">&quot;&lt;/ul&gt;&quot;</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                $this-&gt;_optionsValue = array(</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        <span class="stringliteral">&#39;title_box&#39;</span>=&gt;_(<span class="stringliteral">&quot;Multimedia&quot;</span>),</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        <span class="stringliteral">&#39;title_list_galleries&#39;</span>=&gt;_(<span class="stringliteral">&quot;Galleria multimediale&quot;</span>),</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                        <span class="stringliteral">&#39;title_map&#39;</span>=&gt;_(<span class="stringliteral">&quot;Mappa geolocalizzazione media&quot;</span>),</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                        <span class="stringliteral">&#39;title_slider&#39;</span>=&gt;<span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                        <span class="stringliteral">&#39;image_max_width&#39;</span>=&gt;1024,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                        <span class="stringliteral">&#39;thumb_dimension&#39;</span>=&gt;160,</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                        <span class="stringliteral">&#39;box_promoted_code&#39;</span>=&gt;$box_promoted_code_dft,</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                        <span class="stringliteral">&#39;box_tpl_code&#39;</span>=&gt;$box_tpl_code_dft,</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        <span class="stringliteral">&#39;box_num_galleries&#39;</span>=&gt;3,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        <span class="stringliteral">&#39;list_galleries_tpl&#39;</span>=&gt;1,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                        <span class="stringliteral">&#39;list_galleries_tpl_ifp&#39;</span>=&gt;<span class="stringliteral">&#39;20&#39;</span>,</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                        <span class="stringliteral">&#39;gallery_ifp&#39;</span>=&gt;<span class="stringliteral">&#39;40&#39;</span>,</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                        <span class="stringliteral">&#39;list_galleries_tpl1_code&#39;</span>=&gt;$tpl1_row_dft,</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                        <span class="stringliteral">&#39;list_galleries_tpl2_cols&#39;</span>=&gt;<span class="stringliteral">&#39;&#39;</span>,</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        <span class="stringliteral">&#39;list_galleries_tpl2_code&#39;</span>=&gt;$tpl2_cell_dft,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                        <span class="stringliteral">&#39;relevance_gallery_gname&#39;</span>=&gt;50,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                        <span class="stringliteral">&#39;relevance_gallery_gdescription&#39;</span>=&gt;10,</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                        <span class="stringliteral">&#39;relevance_gallery_mname&#39;</span>=&gt;5,</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                        <span class="stringliteral">&#39;relevance_gallery_mdescription&#39;</span>=&gt;2,</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                        <span class="stringliteral">&#39;relevance_gallery_mtags&#39;</span>=&gt;5,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                        <span class="stringliteral">&#39;relevance_media_mname&#39;</span>=&gt;50,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                        <span class="stringliteral">&#39;relevance_media_mdescription&#39;</span>=&gt;10,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                        <span class="stringliteral">&#39;relevance_media_mtags&#39;</span>=&gt;25,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                );</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                $this-&gt;_title_box = htmlChars($this-&gt;setOption(<span class="stringliteral">&#39;title_box&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;title_box&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>)));</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                $this-&gt;_title_list_galleries = htmlChars($this-&gt;setOption(<span class="stringliteral">&#39;title_list_galleries&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;title_list_galleries&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>)));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                $this-&gt;_title_map = htmlChars($this-&gt;setOption(<span class="stringliteral">&#39;title_map&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;title_map&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>)));</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                $this-&gt;_title_slider = htmlChars($this-&gt;setOption(<span class="stringliteral">&#39;title_slider&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;title_slider&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>)));</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                $this-&gt;_image_max_width = $this-&gt;setOption(<span class="stringliteral">&#39;image_max_width&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;image_max_width&#39;</span>]));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                $this-&gt;_thumb_dimension = $this-&gt;setOption(<span class="stringliteral">&#39;thumb_dimension&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;thumb_dimension&#39;</span>]));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                $this-&gt;_box_promoted_code = $this-&gt;setOption(<span class="stringliteral">&#39;box_promoted_code&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;box_promoted_code&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                $this-&gt;_box_tpl_code = $this-&gt;setOption(<span class="stringliteral">&#39;box_tpl_code&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;box_tpl_code&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                $this-&gt;_box_num_galleries = $this-&gt;setOption(<span class="stringliteral">&#39;box_num_galleries&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;box_num_galleries&#39;</span>]));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                $this-&gt;_list_galleries_tpl = $this-&gt;setOption(<span class="stringliteral">&#39;list_galleries_tpl&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                $this-&gt;_list_galleries_tpl_ifp = $this-&gt;setOption(<span class="stringliteral">&#39;list_galleries_tpl_ifp&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl_ifp&#39;</span>]));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                $this-&gt;_gallery_ifp = $this-&gt;setOption(<span class="stringliteral">&#39;gallery_ifp&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;gallery_ifp&#39;</span>]));</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                $this-&gt;_list_galleries_tpl1_code = $this-&gt;setOption(<span class="stringliteral">&#39;list_galleries_tpl1_code&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl1_code&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                $this-&gt;_list_galleries_tpl2_cols = $this-&gt;setOption(<span class="stringliteral">&#39;list_galleries_tpl2_cols&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl2_cols&#39;</span>]));</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                $this-&gt;_list_galleries_tpl2_code = $this-&gt;setOption(<span class="stringliteral">&#39;list_galleries_tpl2_code&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl2_code&#39;</span>], <span class="stringliteral">&#39;translation&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                $this-&gt;_relevance_gallery_gname = $this-&gt;setOption(<span class="stringliteral">&#39;relevance_gallery_gname&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_gname&#39;</span>]));</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                $this-&gt;_relevance_gallery_gdescription = $this-&gt;setOption(<span class="stringliteral">&#39;relevance_gallery_gdescription&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_gdescription&#39;</span>]));</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                $this-&gt;_relevance_gallery_mname = $this-&gt;setOption(<span class="stringliteral">&#39;relevance_gallery_mname&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_mname&#39;</span>]));</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                $this-&gt;_relevance_gallery_mdescription = $this-&gt;setOption(<span class="stringliteral">&#39;relevance_gallery_mdescription&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_mdescription&#39;</span>]));</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                $this-&gt;_relevance_gallery_mtags = $this-&gt;setOption(<span class="stringliteral">&#39;relevance_gallery_mtags&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_mtags&#39;</span>]));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                $this-&gt;_relevance_media_mname = $this-&gt;setOption(<span class="stringliteral">&#39;relevance_media_mname&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_media_mname&#39;</span>]));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                $this-&gt;_relevance_media_mdescription = $this-&gt;setOption(<span class="stringliteral">&#39;relevance_media_mdescription&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_media_mdescription&#39;</span>]));</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                $this-&gt;_relevance_media_mtags = $this-&gt;setOption(<span class="stringliteral">&#39;relevance_media_mtags&#39;</span>, array(<span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_media_mtags&#39;</span>]));</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                $this-&gt;_options = <span class="keyword">new</span> options($this-&gt;_className, $this-&gt;_instance);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                $this-&gt;_optionsLabels = array(</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                        <span class="stringliteral">&quot;title_box&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Titolo box&quot;</span>),</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;title_box&#39;</span>],</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                <span class="stringliteral">&#39;section&#39;</span>=&gt;<span class="keyword">true</span>, </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                <span class="stringliteral">&#39;section_title&#39;</span>=&gt;_(<span class="stringliteral">&#39;Titoli delle viste pubbliche&#39;</span>)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                        ),</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        <span class="stringliteral">&quot;title_list_galleries&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Titolo lista gallerie&quot;</span>), </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;title_list_galleries&#39;</span>] </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                        ),</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        <span class="stringliteral">&quot;title_map&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Titolo mappa&quot;</span>),</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;title_map&#39;</span>]</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                        ),</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                        <span class="stringliteral">&quot;title_slider&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Titolo slider&quot;</span>),</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;title_slider&#39;</span>]</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        ),</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                        <span class="stringliteral">&quot;image_max_width&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Larghezza massima immagini (px)&quot;</span>), </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;image_max_width&#39;</span>],</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                <span class="stringliteral">&#39;section&#39;</span>=&gt;<span class="keyword">true</span>, </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                                <span class="stringliteral">&#39;section_title&#39;</span>=&gt;_(<span class="stringliteral">&#39;Opzioni di ridimensionamento&#39;</span>)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                        ), </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                        <span class="stringliteral">&quot;thumb_dimension&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Dimensione lato lungo della thumbnail (px)&quot;</span>),</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;thumb_dimension&#39;</span>]</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                        ), </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                        <span class="stringliteral">&quot;box_promoted_code&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;array(_(<span class="stringliteral">&quot;Codice galleria promossa&quot;</span>), $gallery_code_exp), </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;box_promoted_code&#39;</span>],</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                <span class="stringliteral">&#39;section&#39;</span>=&gt;<span class="keyword">true</span>, </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                <span class="stringliteral">&#39;section_title&#39;</span>=&gt;_(<span class="stringliteral">&#39;Opzioni vista box&#39;</span>), </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                <span class="stringliteral">&#39;section_description&#39;</span>=&gt;_(<span class="stringliteral">&#39;La vista box è una lista che mostra le ultime n gallerie modificate. Ciascun elemento viene inserito all\&#39;interno di un elemento &lt;b&gt;li&lt;/b&gt;. Se esiste una galleria &quot;promossa&quot; questa viene inserita in testa alla lista.&#39;</span>), </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                        ), </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                        <span class="stringliteral">&quot;box_tpl_code&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;array(_(<span class="stringliteral">&quot;Codice singolo elemento&quot;</span>), $gallery_code_exp), </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;box_tpl_code&#39;</span>],</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                        ), </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                        <span class="stringliteral">&quot;box_num_galleries&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Numero di gallerie mostrate&quot;</span>),</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;box_num_galleries&#39;</span>]</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                        ),</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                        <span class="stringliteral">&quot;list_galleries_tpl&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Template della vista lista gallerie&lt;br /&gt;1. tabella 1 galleria per riga&lt;br /&gt;2. tabella n thumb per riga&quot;</span>), </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl&#39;</span>],</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                <span class="stringliteral">&#39;section&#39;</span>=&gt;<span class="keyword">true</span>, </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                <span class="stringliteral">&#39;section_title&#39;</span>=&gt;_(<span class="stringliteral">&#39;Template lista gallerie&#39;</span>)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                        ), </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                        <span class="stringliteral">&quot;list_galleries_tpl_ifp&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Numero massimo di gallerie per pagina&quot;</span>), </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl_ifp&#39;</span>],</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        ), </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                        <span class="stringliteral">&quot;gallery_ifp&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Numero massimo di media per pagina&quot;</span>), </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;gallery_ifp&#39;</span>],</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                        ), </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                        <span class="stringliteral">&quot;list_galleries_tpl1_code&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;array(_(<span class="stringliteral">&quot;Codice riga&quot;</span>), $gallery_code_exp), </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl1_code&#39;</span>],</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                <span class="stringliteral">&#39;section&#39;</span>=&gt;<span class="keyword">true</span>, </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                <span class="stringliteral">&#39;section_title&#39;</span>=&gt;_(<span class="stringliteral">&#39;Opzioni template 1 galleria per riga&#39;</span>), </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                        ), </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        <span class="stringliteral">&quot;list_galleries_tpl2_cols&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Numero di gallerie per riga&quot;</span>), </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl2_cols&#39;</span>],</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                <span class="stringliteral">&#39;section&#39;</span>=&gt;<span class="keyword">true</span>, </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                                <span class="stringliteral">&#39;section_title&#39;</span>=&gt;_(<span class="stringliteral">&#39;Opzioni template n gallerie per riga&#39;</span>), </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        ),</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                        <span class="stringliteral">&quot;list_galleries_tpl2_code&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;array(_(<span class="stringliteral">&quot;Codice cella&quot;</span>), $gallery_code_exp), </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;list_galleries_tpl2_code&#39;</span>],</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                        ),</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                        <span class="stringliteral">&quot;relevance_gallery_gname&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Peso nome galleria nella ricerca gallerie&quot;</span>), </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_gname&#39;</span>],</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                                <span class="stringliteral">&#39;section&#39;</span>=&gt;<span class="keyword">true</span>, </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                                <span class="stringliteral">&#39;section_title&#39;</span>=&gt;_(<span class="stringliteral">&#39;Configurazione parametri di ricerca&#39;</span>), </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                                <span class="stringliteral">&#39;section_description&#39;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>._(<span class="stringliteral">&quot;La rilevanza di un risultato della ricerca è data dalla somma dei pesi assegnati alla presenza della chiave di ricerca nei campi ed il numero di occorrenze della chiave di ricerca negli stessi. Le occorrenze hanno di default valore 1. Modificare i parametri che seguono a seconda dell&#39;importanza che si vuole attribuire ai vari campi. Esempio: se si considera importante ai fini della ricerca il riscontro di una chiave all&#39;interno dei tags aumentare il valore del &#39;peso tag media&#39; rispetto agli altri parametri.&quot;</span>).<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>, </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                        ),</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                        <span class="stringliteral">&quot;relevance_gallery_gdescription&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Peso descrizione galleria nella ricerca gallerie&quot;</span>), </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_gdescription&#39;</span>],</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                        ),</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                        <span class="stringliteral">&quot;relevance_gallery_mname&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Peso nome media nella ricerca gallerie&quot;</span>), </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_mname&#39;</span>],</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        ),</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                        <span class="stringliteral">&quot;relevance_gallery_mdescription&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Peso descrizione media nella ricerca gallerie&quot;</span>), </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_mdescription&#39;</span>],</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                        ),</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                        <span class="stringliteral">&quot;relevance_gallery_mtags&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Peso tag media nella ricerca gallerie&quot;</span>), </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_gallery_mtags&#39;</span>],</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                        ),</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                        <span class="stringliteral">&quot;relevance_media_mname&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Peso nome media nella ricerca media&quot;</span>), </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_media_mname&#39;</span>],</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                        ),</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                        <span class="stringliteral">&quot;relevance_media_mdescription&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Peso descrizione media nella ricerca media&quot;</span>), </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_media_mdescription&#39;</span>],</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                        ),</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                        <span class="stringliteral">&quot;relevance_media_mtags&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                                <span class="stringliteral">&#39;label&#39;</span>=&gt;_(<span class="stringliteral">&quot;Peso tag media nella ricerca media&quot;</span>), </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                                <span class="stringliteral">&#39;value&#39;</span>=&gt;$this-&gt;_optionsValue[<span class="stringliteral">&#39;relevance_media_mtags&#39;</span>],</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                <span class="stringliteral">&quot;required&quot;</span>=&gt;<span class="keyword">false</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                        ),</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                );</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                $this-&gt;_action = cleanVar($_REQUEST, <span class="stringliteral">&#39;action&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                $this-&gt;_block = cleanVar($_REQUEST, <span class="stringliteral">&#39;block&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00481"></a><span class="lineno"><a class="code" href="classmultimedia.html#a3fdda2e80302512fbc51bd76d619dce2">  481</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a3fdda2e80302512fbc51bd76d619dce2" title="Restituisce alcune proprietà della classe utili per la generazione di nuove istanze.">getClassElements</a>() {</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                <span class="keywordflow">return</span> array(</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        <span class="stringliteral">&quot;tables&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                <span class="stringliteral">&#39;multimedia_slider&#39;</span>, </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                                <span class="stringliteral">&#39;multimedia_gallery&#39;</span>, </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                                <span class="stringliteral">&#39;multimedia_grp&#39;</span>, </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                <span class="stringliteral">&#39;multimedia_item&#39;</span>, </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                <span class="stringliteral">&#39;multimedia_item_tag&#39;</span>, </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                <span class="stringliteral">&#39;multimedia_license&#39;</span>, </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                <span class="stringliteral">&#39;multimedia_opt&#39;</span>, </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                <span class="stringliteral">&#39;multimedia_tag&#39;</span>, </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                <span class="stringliteral">&#39;multimedia_usr&#39;</span>,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                                <span class="stringliteral">&#39;multimedia_video_platform&#39;</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                        ),</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        <span class="stringliteral">&quot;css&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                <span class="stringliteral">&#39;multimedia.css&#39;</span>,</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                <span class="stringliteral">&#39;NivooSlider.css&#39;</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                        ),</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        <span class="stringliteral">&quot;folderStructure&quot;</span>=&gt;array(</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                CONTENT_DIR.OS.<span class="stringliteral">&#39;multimedia&#39;</span>=&gt;array(</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                        <span class="stringliteral">&#39;image&#39;</span> =&gt; null,</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                        <span class="stringliteral">&#39;audio&#39;</span> =&gt; null,</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                        <span class="stringliteral">&#39;thumb&#39;</span> =&gt; null</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                )       </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        )</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                );</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="code" href="classmultimedia.html#a6322cbb1daf9fef84b08b6fa3344b12d">  519</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a6322cbb1daf9fef84b08b6fa3344b12d" title="Metodo invocato quando viene eliminata un&#39;istanza.">deleteInstance</a>() {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                $this-&gt;accessGroup(<span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">                 * delete records and translations from table multimedia_gallery</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                $query = <span class="stringliteral">&quot;SELECT id FROM &quot;</span>.multimediaGallery::$tbl_gallery.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                $a = $this-&gt;_db-&gt;selectquery($query);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                <span class="keywordflow">if</span>(<span class="keyword">sizeof</span>($a)&gt;0) </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                        <span class="keywordflow">foreach</span>($a as $b) </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                                language::deleteTranslations(<a class="code" href="classmultimedia_gallery.html#a9c6e5733e0cecca76989954070a5a2c9">multimediaGallery::$tbl_gallery</a>, $b[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                $query = <span class="stringliteral">&quot;DELETE FROM &quot;</span>.multimediaGallery::$tbl_gallery.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;   </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                $result = $this-&gt;_db-&gt;actionquery($query);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">                 * delete records and translations from table multimedia_item and tag associations</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                $query = <span class="stringliteral">&quot;SELECT id FROM &quot;</span>.multimediaItem::$tbl_item.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                $a = $this-&gt;_db-&gt;selectquery($query);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <span class="keywordflow">if</span>(<span class="keyword">sizeof</span>($a)&gt;0) </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                        <span class="keywordflow">foreach</span>($a as $b) { </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                                language::deleteTranslations(<a class="code" href="classmultimedia_item.html#a49d085fe122dba734da0321e77b74b96">multimediaItem::$tbl_item</a>, $b[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                $item = <span class="keyword">new</span> <a class="code" href="classmultimedia_item.html" title="Classe ancestor che rappresenta un media.">multimediaItem</a>($b[<span class="stringliteral">&#39;id&#39;</span>], $this);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                                $item-&gt;delete();</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">                 * delete records and translations from table multimedia_license</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                $query = <span class="stringliteral">&quot;SELECT id FROM &quot;</span>.multimediaLicense::$tbl_license.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                $a = $this-&gt;_db-&gt;selectquery($query);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="keywordflow">if</span>(<span class="keyword">sizeof</span>($a)&gt;0) </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                        <span class="keywordflow">foreach</span>($a as $b) </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                language::deleteTranslations(<a class="code" href="classmultimedia_license.html#ab6c73f1b120eec9c5deaa1162e96278e">multimediaLicense::$tbl_license</a>, $b[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                $query = <span class="stringliteral">&quot;DELETE FROM &quot;</span>.multimediaLicense::$tbl_license.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;   </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                $result = $this-&gt;_db-&gt;actionquery($query);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">                 * delete records and translations from table multimedia_slider</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                $query = <span class="stringliteral">&quot;SELECT id FROM &quot;</span>.multimediaSlider::$tbl_slider.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                $a = $this-&gt;_db-&gt;selectquery($query);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                <span class="keywordflow">if</span>(<span class="keyword">sizeof</span>($a)&gt;0) </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                        <span class="keywordflow">foreach</span>($a as $b) </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                language::deleteTranslations(multimediaSLider::$tbl_slider, $b[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                $query = <span class="stringliteral">&quot;DELETE FROM &quot;</span>.multimediaSlider::$tbl_slider.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;     </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                $result = $this-&gt;_db-&gt;actionquery($query);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">                 * delete records and translations from table multimedia_video_platform</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                $query = <span class="stringliteral">&quot;SELECT id FROM &quot;</span>.multimediaVideoPlatform::$tbl_video_platform.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                $a = $this-&gt;_db-&gt;selectquery($query);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="keywordflow">if</span>(<span class="keyword">sizeof</span>($a)&gt;0) </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                        <span class="keywordflow">foreach</span>($a as $b) </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                                language::deleteTranslations(<a class="code" href="classmultimedia_video_platform.html#aea664399cf081ba27ac4402ee28e542b">multimediaVideoPlatform::$tbl_video_platform</a>, $b[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                $query = <span class="stringliteral">&quot;DELETE FROM &quot;</span>.multimediaVideoPlatform::$tbl_video_platform.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;      </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                $result = $this-&gt;_db-&gt;actionquery($query);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">                 * delete options</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                $opt_id = $this-&gt;_db-&gt;getFieldFromId($this-&gt;_tbl_opt, <span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;instance&quot;</span>, $this-&gt;_instance);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                language::deleteTranslations($this-&gt;_tbl_opt, $opt_id);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                $query = <span class="stringliteral">&quot;DELETE FROM &quot;</span>.$this-&gt;_tbl_opt.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;   </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                $result = $this-&gt;_db-&gt;actionquery($query);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">                 * delete group users association</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                $query = <span class="stringliteral">&quot;DELETE FROM &quot;</span>.$this-&gt;_tbl_usr.<span class="stringliteral">&quot; WHERE instance=&#39;$this-&gt;_instance&#39;&quot;</span>;   </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                $result = $this-&gt;_db-&gt;actionquery($query);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">                 * delete css files</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                $classElements = $this-&gt;<a class="code" href="classmultimedia.html#a3fdda2e80302512fbc51bd76d619dce2" title="Restituisce alcune proprietà della classe utili per la generazione di nuove istanze.">getClassElements</a>();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                <span class="keywordflow">foreach</span>($classElements[<span class="stringliteral">&#39;css&#39;</span>] as $css) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                        unlink(APP_DIR.OS.$this-&gt;_className.OS.baseFileName($css).<span class="stringliteral">&quot;_&quot;</span>.$this-&gt;_instanceName.<span class="stringliteral">&quot;.css&quot;</span>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">                 * delete folder structure</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                <span class="keywordflow">foreach</span>($classElements[<span class="stringliteral">&#39;folderStructure&#39;</span>] as $fld=&gt;$fldStructure) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                        $this-&gt;deleteFileDir($fld.OS.$this-&gt;_instanceName, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <span class="keywordflow">return</span> $result;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        }</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div>
<div class="line"><a name="l00623"></a><span class="lineno"><a class="code" href="classmultimedia.html#aab72afe17ec1295cd3e4fa689f876225">  623</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#aab72afe17ec1295cd3e4fa689f876225" title="Setter per le proprietà group.">setGroups</a>(){</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                <span class="comment">// drafting</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                $this-&gt;_group_1 = array($this-&gt;_list_group[0], $this-&gt;_list_group[1]);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                <span class="comment">// Viewer</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                $this-&gt;_group_2 = array($this-&gt;_list_group[0], $this-&gt;_list_group[1], $this-&gt;_list_group[2]);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00642"></a><span class="lineno"><a class="code" href="classmultimedia.html#a067c356298b8ae175f6f1059fe234680">  642</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a067c356298b8ae175f6f1059fe234680" title="Definizione dei metodi pubblici che forniscono un output per il front-end.">outputFunctions</a>() {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                $list = array(</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                        <span class="stringliteral">&quot;box&quot;</span> =&gt; array(<span class="stringliteral">&quot;label&quot;</span>=&gt;_(<span class="stringliteral">&quot;Box ultime gallerie modificate&quot;</span>), <span class="stringliteral">&quot;role&quot;</span>=&gt;<span class="charliteral">&#39;1&#39;</span>),</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                        <span class="stringliteral">&quot;galleries&quot;</span> =&gt; array(<span class="stringliteral">&quot;label&quot;</span>=&gt;_(<span class="stringliteral">&quot;Lista gallerie&quot;</span>), <span class="stringliteral">&quot;role&quot;</span>=&gt;<span class="charliteral">&#39;1&#39;</span>),</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                        <span class="stringliteral">&quot;slider&quot;</span> =&gt; array(<span class="stringliteral">&quot;label&quot;</span>=&gt;_(<span class="stringliteral">&quot;Slider delle immagini della galleria selezionata&quot;</span>), <span class="stringliteral">&quot;role&quot;</span>=&gt;<span class="charliteral">&#39;1&#39;</span>),</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                        <span class="stringliteral">&quot;map&quot;</span> =&gt; array(<span class="stringliteral">&quot;label&quot;</span>=&gt;_(<span class="stringliteral">&quot;Mappa media geolocalizzati, impostare le dimesioni della mappa da css. Se in template con la vista galleria mostra i media associati alla galleria in questione.&quot;</span>), <span class="stringliteral">&quot;role&quot;</span>=&gt;<span class="charliteral">&#39;1&#39;</span>),</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                );</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                <span class="keywordflow">return</span> $list;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        }</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno"><a class="code" href="classmultimedia.html#ad95fe00b83d7eb56fe184277843eb5ef">  659</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#ad95fe00b83d7eb56fe184277843eb5ef" title="Path relativo alla thumb di default per le gallerie.">defaultGalleryThumbPath</a>() {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="keywordflow">return</span> $this-&gt;_class_img.<span class="charliteral">&#39;/&#39;</span>.<span class="stringliteral">&#39;gallery_thumb.png&#39;</span>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00668"></a><span class="lineno"><a class="code" href="classmultimedia.html#aa68da97dfeb6da1cd5533edfb3ccff6a">  668</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#aa68da97dfeb6da1cd5533edfb3ccff6a" title="Path relativo alla thumb di default per le immagini.">defaultImageThumbPath</a>() {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">return</span> $this-&gt;_class_img.<span class="charliteral">&#39;/&#39;</span>.<span class="stringliteral">&#39;image_thumb.png&#39;</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div>
<div class="line"><a name="l00677"></a><span class="lineno"><a class="code" href="classmultimedia.html#a64cbcca831cff9e0b605cbda10e8a722">  677</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a64cbcca831cff9e0b605cbda10e8a722" title="Path relativo alla thumb di default per i video.">defaultVideoThumbPath</a>() {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <span class="keywordflow">return</span> $this-&gt;_class_img.<span class="charliteral">&#39;/&#39;</span>.<span class="stringliteral">&#39;video_thumb.png&#39;</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno"><a class="code" href="classmultimedia.html#a0c46df28e6801f6dc6e54bf28d95dc61">  686</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a0c46df28e6801f6dc6e54bf28d95dc61" title="Path relativo alla thumb di default per gli audio.">defaultAudioThumbPath</a>() {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <span class="keywordflow">return</span> $this-&gt;_class_img.<span class="charliteral">&#39;/&#39;</span>.<span class="stringliteral">&#39;audio_thumb.png&#39;</span>;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00696"></a><span class="lineno"><a class="code" href="classmultimedia.html#ac499385c5de266f38346a7456df332c6">  696</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#ac499385c5de266f38346a7456df332c6" title="Percorso assoluto alla cartella dei contenuti.">getBaseAbsPath</a>($type) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                <span class="keywordflow">return</span> $this-&gt;_data_dir.OS.$type;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00708"></a><span class="lineno"><a class="code" href="classmultimedia.html#a50e3d476ccd1e2e9f9337eaeb6810504">  708</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a50e3d476ccd1e2e9f9337eaeb6810504" title="Percorso relativo alla cartella dei contenuti.">getBasePath</a>($type) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                <span class="keywordflow">return</span> $this-&gt;_data_www.<span class="charliteral">&#39;/&#39;</span>.$type;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00719"></a><span class="lineno"><a class="code" href="classmultimedia.html#acc47f8ed293975981d447b5acc602f46">  719</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#acc47f8ed293975981d447b5acc602f46" title="Restituisce la dimensione massima del lato maggiore delle thumb.">getThumbDimension</a>() {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classmultimedia.html#ae69a4d75b6b27123f8789fc85ea58aa0" title="Dimensione in px del lato lungo della thumb.">$this-&gt;_thumb_dimension</a>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno"><a class="code" href="classmultimedia.html#ae82d300c28baaa430df1c5216dc5c759">  730</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#ae82d300c28baaa430df1c5216dc5c759" title="Restituisce la larghezza massima delle immagini.">getImageMaxWidth</a>() {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="classmultimedia.html#a3bb375a1ea1a54a0fda3ea2abf48c1a6" title="Dimensione in px della larghezza massima delle immagini.">$this-&gt;_image_max_width</a>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno"><a class="code" href="classmultimedia.html#aa4b5aceb8fa96bcafa0ab2036c2ce26e">  741</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#aa4b5aceb8fa96bcafa0ab2036c2ce26e" title="Front end box ultime gallerie modificate.">box</a>() {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                $this-&gt;setAccess($this-&gt;_access_base);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&quot;/multimedia_&quot;</span>.$this-&gt;_instanceName.<span class="stringliteral">&quot;.css&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                        $private = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                }</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                        $private = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                $promoted = <a class="code" href="classmultimedia_gallery.html#af71212a66a3d8feec1bd577be3d603c9" title="Restituisce la più recente galleria promossa.">multimediaGallery::getLEPromoted</a>($this, array(<span class="stringliteral">&#39;private&#39;</span>=&gt;$private, <span class="stringliteral">&#39;published&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                $where_q = $promoted ? <span class="stringliteral">&#39;id != \&#39;&#39;</span> . $promoted-&gt;id . <span class="charliteral">&#39;\&#39;&#39;</span> : <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                        </div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                $limit = array(0, $this-&gt;_box_num_galleries);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                $gobjs = <a class="code" href="classmultimedia_gallery.html#a1275fbe2c36ed788c12c520739860622" title="Restituisce oggetti di tipo galleria.">multimediaGallery::get</a>($this, array(<span class="stringliteral">&#39;private&#39;</span>=&gt;$private, <span class="stringliteral">&#39;published&#39;</span>=&gt;<span class="keyword">true</span>, <span class="stringliteral">&#39;where&#39;</span>=&gt;$where_q, <span class="stringliteral">&#39;order&#39;</span>=&gt;<span class="stringliteral">&#39;last_edit_date DESC&#39;</span>, <span class="stringliteral">&#39;limit&#39;</span>=&gt;$limit));</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                preg_match_all(<span class="stringliteral">&quot;#{{[^}]+}}#&quot;</span>, $this-&gt;_box_tpl_code, $matches);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                $lis = array();</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="keywordflow">foreach</span>($gobjs as $g) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                        $li = $this-&gt;<a class="code" href="classmultimedia.html#a907f324d8f0130fa7299a945e69f0d50" title="Parserizzazione del template inserito da opzioni per la vista lista gallerie.">parseTemplate</a>($g, $this-&gt;_box_tpl_code, $matches);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                        $lis[] = $li;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                }</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                $promoted_text = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <span class="keywordflow">if</span>($promoted) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                        preg_match_all(<span class="stringliteral">&quot;#{{[^}]+}}#&quot;</span>, $this-&gt;_box_promoted_code, $matches);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                        $promoted_text = $this-&gt;<a class="code" href="classmultimedia.html#a907f324d8f0130fa7299a945e69f0d50" title="Parserizzazione del template inserito da opzioni per la vista lista gallerie.">parseTemplate</a>($promoted, $this-&gt;_box_promoted_code, $matches);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                }</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                $view = <span class="keyword">new</span> view($this-&gt;_view_dir);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                $view-&gt;setViewTpl(<span class="stringliteral">&#39;box&#39;</span>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;section_id&#39;</span>, <span class="stringliteral">&#39;box_&#39;</span>.$this-&gt;_className.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;_instanceName);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;title&#39;</span>, $this-&gt;_title_box);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;promoted&#39;</span>, $promoted_text);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;lis&#39;</span>, $lis);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;all_galleries_url&#39;</span>, $this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;galleries&#39;</span>));</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                <span class="keywordflow">return</span> $view-&gt;render();</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno"><a class="code" href="classmultimedia.html#aaee7cf5ecc7e3cde40fc05d115aafe1e">  794</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#aaee7cf5ecc7e3cde40fc05d115aafe1e" title="Front end slider.">slider</a>() {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                $this-&gt;setAccess($this-&gt;_access_base);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                $slider = <a class="code" href="classmultimedia_slider.html#a533b9b96fb847db54994c7502f6a81d6" title="Istanze legate all&#39;stanza del controller.">multimediaSlider::getFromInstance</a>($this);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                <span class="keywordflow">if</span>(!$slider-&gt;id) <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&quot;/NivooSlider.js&quot;</span>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&quot;/multimedia.js&quot;</span>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&quot;/multimedia_&quot;</span>.$this-&gt;_instanceName.<span class="stringliteral">&quot;.css&quot;</span>);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&quot;/NivooSlider_&quot;</span>.$this-&gt;_instanceName.<span class="stringliteral">&quot;.css&quot;</span>);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                $content = preg_replace(<span class="stringliteral">&quot;#{{\s*slider\s*}}#&quot;</span>, $this-&gt;<a class="code" href="classmultimedia.html#a36f4d054ca6f8a559fa58796c4afb6b7" title="Ritorna il codice necessario alla creazione dello slider.">sliderContent</a>($slider), $slider-&gt;ml(<span class="stringliteral">&#39;tpl&#39;</span>));       </div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                $view = <span class="keyword">new</span> view($this-&gt;_view_dir);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                $view-&gt;setViewTpl(<span class="stringliteral">&#39;slider&#39;</span>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;section_id&#39;</span>, <span class="stringliteral">&#39;slider_&#39;</span>.$this-&gt;_className.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;_instanceName);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;title&#39;</span>, $this-&gt;_title_slider);</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;content&#39;</span>, $content);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                <span class="keywordflow">return</span> $view-&gt;render();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno"><a class="code" href="classmultimedia.html#a36f4d054ca6f8a559fa58796c4afb6b7">  824</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a36f4d054ca6f8a559fa58796c4afb6b7" title="Ritorna il codice necessario alla creazione dello slider.">sliderContent</a>($slider) {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                        $private = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                        $private = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                $items = $slider-&gt;getItems($this, $private);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                $images = array();</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                <span class="keywordflow">foreach</span>($items as $item) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                        $images[] = $item-&gt;show($this);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                list($effect, $orientation) = $slider-&gt;getEffectOrientation();</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                $view = <span class="keyword">new</span> view($this-&gt;_view_dir);</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                $view-&gt;setViewTpl(<span class="stringliteral">&#39;slider_content&#39;</span>);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;container_id&#39;</span>, <span class="stringliteral">&#39;slider_container_multimedia_&#39;</span>.$this-&gt;_instanceName);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;images&#39;</span>, $images);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;animation_effect_duration&#39;</span>, $slider-&gt;animation_effect_duration);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;auto_play&#39;</span>, $slider-&gt;auto_play);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;show_ctrls&#39;</span>, $slider-&gt;show_ctrls);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;mouseout_hide_ctrls&#39;</span>, $slider-&gt;mouseout_hide_ctrls);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;effect&#39;</span>, $effect);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;orientation&#39;</span>, $orientation);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;animation_interval&#39;</span>, $slider-&gt;animation_interval);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;pause_on_hover&#39;</span>, $slider-&gt;pause_interval_mouseover);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;slices&#39;</span>, $slider-&gt;slices);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <span class="keywordflow">return</span> $view-&gt;render();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno"><a class="code" href="classmultimedia.html#a066515a441d69b6da3f9f0f25d6ca896">  865</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a066515a441d69b6da3f9f0f25d6ca896" title="Front end dettagli media.">detail</a>() {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                $this-&gt;setAccess($this-&gt;_access_base);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                $id = cleanVar($_GET, <span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);      </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                $item = <a class="code" href="classmultimedia_item.html#a65c590ac6777fd84c6d566a966aeed3c" title="Restituisce un&#39;istanza della sottoclasse appropriata a seconda della proprietà type.">multimediaItem::getObject</a>($id, $this);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                <span class="keywordflow">if</span>(!$item || !$item-&gt;id) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                        error::raise404();</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                <span class="keywordflow">if</span>($item-&gt;private &amp;&amp; !$this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                        error::raise404();</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                $registry-&gt;addJs(<span class="stringliteral">&quot;http://maps.googleapis.com/maps/api/js?key=AIzaSyArAE-uBvCZTRaf_eaFn4umUdESmoUvoxM&amp;sensor=true&quot;</span>);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                $license = array();</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                <span class="keywordflow">if</span>($item-&gt;license) {</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                        $l = <span class="keyword">new</span> <a class="code" href="classmultimedia_license.html" title="Classe che rappresenta le licenze dei media.">multimediaLicense</a>($item-&gt;license, $this);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                        $license = array(</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                <span class="stringliteral">&#39;name&#39;</span> =&gt; htmlChars($l-&gt;name),</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                                <span class="stringliteral">&#39;description&#39;</span> =&gt; htmlChars($l-&gt;description),</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                                <span class="stringliteral">&#39;url&#39;</span> =&gt; $l-&gt;url</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                        );</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                $galleries = array();</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                <span class="keywordflow">if</span>($item-&gt;galleries) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                        <span class="keywordflow">foreach</span>(explode(<span class="charliteral">&#39;,&#39;</span>, $item-&gt;galleries) as $gid) {</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                                <span class="keywordflow">if</span>($gid = trim($gid)) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                                        $g = <span class="keyword">new</span> <a class="code" href="classmultimedia_gallery.html" title="Classe che rappresenta una galleria multimediale (raccolta di media).">multimediaGallery</a>($gid, $this);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                                        <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2) || !$g-&gt;private) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                                                $galleries[] = array(</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                                                        <span class="stringliteral">&#39;name&#39;</span> =&gt; htmlChars($g-&gt;name),</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                                                        <span class="stringliteral">&#39;url&#39;</span> =&gt; $this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;gallery&#39;</span>, array(<span class="stringliteral">&#39;id&#39;</span>=&gt;$g-&gt;slug)),</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                                                );</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                                        }</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                                }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                        }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                $view = <span class="keyword">new</span> view($this-&gt;_view_dir);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                $view-&gt;setViewTpl(<span class="stringliteral">&#39;detail&#39;</span>);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;section_id&#39;</span>, <span class="stringliteral">&#39;detail_&#39;</span>.$this-&gt;_className.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;_instanceName);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;title&#39;</span>, htmlChars($item-&gt;name));</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;galleries&#39;</span>, $galleries);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;media&#39;</span>, $item-&gt;show($this));</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;description&#39;</span>, htmlChars($item-&gt;description));</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;credits&#39;</span>, htmlChars($item-&gt;credits));</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;license&#39;</span>, $license);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;lat&#39;</span>, $item-&gt;lat);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;lng&#39;</span>, $item-&gt;lng);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;tags&#39;</span>, $item-&gt;tags);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;insertion_date&#39;</span>, $item-&gt;insertion_date);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;last_edit_date&#39;</span>, date(<span class="stringliteral">&#39;d/m/Y&#39;</span>, strtotime($item-&gt;last_edit_date)));</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                <span class="keywordflow">return</span> $view-&gt;render();</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno"><a class="code" href="classmultimedia.html#a7f35c814c022f4191d359b5dc139d35b">  933</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a7f35c814c022f4191d359b5dc139d35b" title="Front end mappa con media geolocalizzati.">map</a>() {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                $this-&gt;setAccess($this-&gt;_access_base);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                $registry-&gt;addJs(<span class="stringliteral">&quot;http://maps.googleapis.com/maps/api/js?key=AIzaSyArAE-uBvCZTRaf_eaFn4umUdESmoUvoxM&amp;sensor=true&quot;</span>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&quot;/markerclusterer_packed.js&quot;</span>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&quot;/multimedia.js&quot;</span>);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&quot;/multimedia_&quot;</span>.$this-&gt;_instanceName.<span class="stringliteral">&quot;.css&quot;</span>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                $session = session::instance();</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                $method = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                $evtKey = isset($_GET[EVT_NAME])? is_array($_GET[EVT_NAME])? key($_GET[EVT_NAME]):<span class="keyword">false</span>:<span class="keyword">false</span>;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                <span class="keywordflow">if</span>($evtKey) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                        $parts = explode(<span class="charliteral">&#39;-&#39;</span>, $evtKey);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        $method = $parts[1];</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                <span class="keywordflow">if</span>($method == <span class="stringliteral">&#39;gallery&#39;</span>) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                        $slug = cleanVar($_GET, <span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                        $galleryobj = <a class="code" href="classmultimedia_gallery.html#a15ecd21292073e867b79bf22c6bc3da4" title="Restituisce l&#39;istanza galleria a partire dallo slug fornito.">multimediaGallery::getFromSlug</a>($slug, $this);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                        $gallery = $galleryobj-&gt;id;     </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                }</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                        $gallery = null;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;                }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                        $private = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                        $private = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                }</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                <span class="keywordflow">if</span>($method == <span class="stringliteral">&#39;gallery&#39;</span> &amp;&amp; $session-&gt;multimedia_media_search) {</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                        $results = $session-&gt;multimedia_media_search_results;</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                        $items = array();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                        <span class="keywordflow">foreach</span>($results as $r) {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                                $items[] = <a class="code" href="classmultimedia_item.html#a65c590ac6777fd84c6d566a966aeed3c" title="Restituisce un&#39;istanza della sottoclasse appropriata a seconda della proprietà type.">multimediaItem::getObject</a>($r, $this);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                        }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        $items = <a class="code" href="classmultimedia_item.html#a1275fbe2c36ed788c12c520739860622" title="Restituisce oggetti di tipo media.">multimediaItem::get</a>($this, array(<span class="stringliteral">&#39;published&#39;</span>=&gt;<span class="keyword">true</span>, <span class="stringliteral">&#39;private&#39;</span>=&gt;<span class="keyword">true</span>, <span class="stringliteral">&#39;geolocalization&#39;</span>=&gt;<span class="keyword">true</span>, <span class="stringliteral">&#39;gallery&#39;</span>=&gt;$gallery));</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                $media = array();</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                <span class="keywordflow">foreach</span>($items as $item) {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                        $media[] = array(</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                                <span class="stringliteral">&#39;id&#39;</span>=&gt;$item-&gt;id,</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                                <span class="stringliteral">&#39;name&#39;</span>=&gt;$item-&gt;name,</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                                <span class="stringliteral">&#39;lat&#39;</span>=&gt;$item-&gt;lat,</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                                <span class="stringliteral">&#39;lng&#39;</span>=&gt;$item-&gt;lng,</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                                <span class="stringliteral">&#39;url&#39;</span>=&gt;$this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;detail&#39;</span>, array(<span class="stringliteral">&#39;id&#39;</span>=&gt;$item-&gt;id)),</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                                <span class="stringliteral">&#39;thumb_path&#39;</span>=&gt;$item-&gt;thumbPath($this)</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                        );</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                }</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                $view = <span class="keyword">new</span> view($this-&gt;_view_dir);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                $view-&gt;setViewTpl(<span class="stringliteral">&#39;map&#39;</span>);</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;section_id&#39;</span>, ($method ? $method.<span class="charliteral">&#39;_&#39;</span> : <span class="stringliteral">&#39;&#39;</span>).<span class="stringliteral">&#39;map_&#39;</span>.$this-&gt;_className.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;_instanceName);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;title&#39;</span>, htmlChars($this-&gt;_title_map));</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;media&#39;</span>, $media);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                <span class="keywordflow">return</span> $view-&gt;render();</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div>
<div class="line"><a name="l01005"></a><span class="lineno"><a class="code" href="classmultimedia.html#a95a8d7fad02a27e9dbbfcfafe55a5f1d"> 1005</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a95a8d7fad02a27e9dbbfcfafe55a5f1d" title="Front end galleria.">gallery</a>() {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                $this-&gt;setAccess($this-&gt;_access_base);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                $id = cleanVar($_GET, <span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);      </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                $gallery = <a class="code" href="classmultimedia_gallery.html#a15ecd21292073e867b79bf22c6bc3da4" title="Restituisce l&#39;istanza galleria a partire dallo slug fornito.">multimediaGallery::getFromSlug</a>($id, $this);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                <span class="keywordflow">if</span>(!$gallery || !$gallery-&gt;id) {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                        error::raise404();</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                }</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                <span class="keywordflow">if</span>($gallery-&gt;private &amp;&amp; !$this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                        error::raise404();</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                }</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&quot;/moogallery.js&quot;</span>);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&quot;/moogallery.css&quot;</span>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                $session = session::instance();</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                <span class="keywordflow">if</span>(isset($_POST[<span class="stringliteral">&#39;submit_search&#39;</span>]) || isset($_POST[<span class="stringliteral">&#39;submit_search_all&#39;</span>])) {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                        $this-&gt;<a class="code" href="classmultimedia.html#afd0fc34dfd292cf01b8b334fb83a394c" title="Setta in variabili di sessione i media ottenuti dalla ricerca e la ricerca stessa.">actionSearchMedia</a>($gallery);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                <span class="keywordflow">if</span>($session-&gt;multimedia_media_search) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                        $results = $session-&gt;multimedia_media_search_results;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                        $num_items = count($results);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                        $pagination = <span class="keyword">new</span> pagelist($this-&gt;_gallery_ifp, $num_items, <span class="stringliteral">&#39;array&#39;</span>);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;                        </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;                        $end = min($pagination-&gt;start() + <a class="code" href="classmultimedia.html#ac62c7b085e63a62335ad78e6226b2436" title="Numero di media per pagina nella vista galleria.">$this-&gt;_gallery_ifp</a>, $num_items);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;                        $items = array();</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                        <span class="keywordflow">for</span>($i = $pagination-&gt;start(); $i &lt; $end; $i++) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;                                $items[] = <a class="code" href="classmultimedia_item.html#a65c590ac6777fd84c6d566a966aeed3c" title="Restituisce un&#39;istanza della sottoclasse appropriata a seconda della proprietà type.">multimediaItem::getObject</a>($results[$i], $this);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;                        }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                        </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                        $search_text = $session-&gt;multimedia_media_search;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                        <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                                $private = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                        }</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;                        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                                $private = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                        }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                        $num_items = $gallery-&gt;getItemsCount($this, array(<span class="stringliteral">&#39;private&#39;</span>=&gt;$private, <span class="stringliteral">&#39;published&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                        $pagination = <span class="keyword">new</span> pagelist($this-&gt;_gallery_ifp, $num_items, <span class="stringliteral">&#39;array&#39;</span>);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                        $limit = array($pagination-&gt;start(), <a class="code" href="classmultimedia.html#ac62c7b085e63a62335ad78e6226b2436" title="Numero di media per pagina nella vista galleria.">$this-&gt;_gallery_ifp</a>);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                        $items = $gallery-&gt;getItems($this, array(<span class="stringliteral">&#39;private&#39;</span>=&gt;$private, <span class="stringliteral">&#39;published&#39;</span>=&gt;<span class="keyword">true</span>, <span class="stringliteral">&#39;limit&#39;</span>=&gt;$limit));</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                        $search_text = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                $js_items_ar = array();</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                <span class="keywordflow">foreach</span>($items as $item) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                        $js_items_ar[] = $item-&gt;getMoogalleryListJs($this, $this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;detail&#39;</span>));               </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                $myform = <span class="keyword">new</span> form(<span class="stringliteral">&#39;form_search_media&#39;</span>, <span class="stringliteral">&#39;post&#39;</span>, <span class="keyword">false</span>, array(<span class="stringliteral">&#39;tblLayout&#39;</span>=&gt;<span class="keyword">false</span>));</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                $form_search = $myform-&gt;form($this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;gallery&#39;</span>, array(<span class="stringliteral">&#39;id&#39;</span>=&gt;$gallery-&gt;slug)), <span class="keyword">false</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                $form_search .= $myform-&gt;input(<span class="stringliteral">&#39;search_text&#39;</span>, <span class="stringliteral">&#39;text&#39;</span>, htmlInput($search_text), array(<span class="stringliteral">&#39;hint&#39;</span>=&gt;_(<span class="stringliteral">&#39;cerca media&#39;</span>), <span class="stringliteral">&#39;size&#39;</span>=&gt;20, <span class="stringliteral">&#39;maxlength&#39;</span>=&gt;40));</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                $form_search .= <span class="stringliteral">&#39;&amp;#160;&#39;</span>.$myform-&gt;input(<span class="stringliteral">&#39;submit_search&#39;</span>, <span class="stringliteral">&#39;submit&#39;</span>, _(<span class="stringliteral">&#39;cerca&#39;</span>), array(<span class="stringliteral">&#39;classField&#39;</span>=&gt;<span class="stringliteral">&#39;submit&#39;</span>));</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                $form_search .= <span class="stringliteral">&#39;&amp;#160;&#39;</span>.$myform-&gt;input(<span class="stringliteral">&#39;submit_search_all&#39;</span>, <span class="stringliteral">&#39;submit&#39;</span>, _(<span class="stringliteral">&#39;tutti&#39;</span>), array(<span class="stringliteral">&#39;classField&#39;</span>=&gt;<span class="stringliteral">&#39;submit&#39;</span>));</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                $form_search .= $myform-&gt;cform();</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                $view = <span class="keyword">new</span> view($this-&gt;_view_dir);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                $view-&gt;setViewTpl(<span class="stringliteral">&#39;gallery&#39;</span>);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;section_id&#39;</span>, <span class="stringliteral">&#39;gallery_&#39;</span>.$this-&gt;_className.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;_instanceName);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;form_search&#39;</span>, $form_search);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;search_text&#39;</span>, $search_text);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;title&#39;</span>, htmlChars($gallery-&gt;name));</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;galleries_url&#39;</span>, $this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;galleries&#39;</span>));</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;js_items&#39;</span>, $js_items_ar);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;pagination_summary&#39;</span>, $pagination-&gt;reassumedPrint());</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;pagination_navigation&#39;</span>, $pagination-&gt;listReferenceGINO($this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;gallery&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;id=&#39;</span>.$id, array(<span class="stringliteral">&quot;basename&quot;</span>=&gt;<span class="keyword">false</span>))));</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                <span class="keywordflow">return</span> $view-&gt;render();</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        }</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div>
<div class="line"><a name="l01094"></a><span class="lineno"><a class="code" href="classmultimedia.html#ae239d18214dfe4fa96f795adfebc3a44"> 1094</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#ae239d18214dfe4fa96f795adfebc3a44" title="Front end lista gallerie.">galleries</a>() {</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                $this-&gt;setAccess($this-&gt;_access_base);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                <span class="keywordflow">if</span>(isset($_POST[<span class="stringliteral">&#39;submit_search&#39;</span>]) || isset($_POST[<span class="stringliteral">&#39;submit_search_all&#39;</span>])) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                        $this-&gt;<a class="code" href="classmultimedia.html#acf171a1b80c41839e0cc57d21465df33" title="Setta in variabili di sessione le gallerie ottenute dalla ricerca e la ricerca stessa.">actionSearchGalleries</a>();</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&quot;/&quot;</span>.$this-&gt;_className.<span class="stringliteral">&quot;_&quot;</span>.$this-&gt;_instanceName.<span class="stringliteral">&quot;.css&quot;</span>);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                $session = session::instance();</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                <span class="keywordflow">if</span>($session-&gt;multimedia_galleries_search) {</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                        $results = $session-&gt;multimedia_galleries_search_results;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                        $num_galleries = count($results);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                        $pagination = <span class="keyword">new</span> pagelist($this-&gt;_list_galleries_tpl_ifp, $num_galleries, <span class="stringliteral">&#39;array&#39;</span>);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                        </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                        $end = min($pagination-&gt;start() + <a class="code" href="classmultimedia.html#a232dc899e4b5848642bec6959dc4046e" title="Numero di elementi per pagina nella vista elenco gallerie.">$this-&gt;_list_galleries_tpl_ifp</a>, $num_galleries);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                        $gobjs = array();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                        <span class="keywordflow">for</span>($i = $pagination-&gt;start(); $i &lt; $end; $i++) {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                                $gobjs[] = <span class="keyword">new</span> <a class="code" href="classmultimedia_gallery.html" title="Classe che rappresenta una galleria multimediale (raccolta di media).">multimediaGallery</a>($results[$i], $this);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                        }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                        </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                        $search_text = $session-&gt;multimedia_galleries_search;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                }</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                        <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                                $private = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                        }</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                                $private = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                        }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                        </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                        $num_galleries = <a class="code" href="classmultimedia_gallery.html#aadfe0081c39f9f394d6efdbf895fb1c7" title="Restituisce il numero di oggetti di tipo galleria che rispettano le condizioni date.">multimediaGallery::getCount</a>($this, array(<span class="stringliteral">&#39;private&#39;</span>=&gt;$private, <span class="stringliteral">&#39;published&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                        $pagination = <span class="keyword">new</span> pagelist($this-&gt;_list_galleries_tpl_ifp, $num_galleries, <span class="stringliteral">&#39;array&#39;</span>);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                        $limit = array($pagination-&gt;start(), <a class="code" href="classmultimedia.html#a232dc899e4b5848642bec6959dc4046e" title="Numero di elementi per pagina nella vista elenco gallerie.">$this-&gt;_list_galleries_tpl_ifp</a>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                        $gobjs = <a class="code" href="classmultimedia_gallery.html#a1275fbe2c36ed788c12c520739860622" title="Restituisce oggetti di tipo galleria.">multimediaGallery::get</a>($this, array(<span class="stringliteral">&#39;private&#39;</span>=&gt;$private, <span class="stringliteral">&#39;published&#39;</span>=&gt;<span class="keyword">true</span>, <span class="stringliteral">&#39;limit&#39;</span>=&gt;$limit));</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                        $search_text = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                }</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                $rows = array();</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                $view = <span class="keyword">new</span> view($this-&gt;_view_dir);</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                <span class="keywordflow">if</span>($this-&gt;_list_galleries_tpl == 1) {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                        $view-&gt;setViewTpl(<span class="stringliteral">&#39;galleries_1&#39;</span>);</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                        preg_match_all(<span class="stringliteral">&quot;#{{[^}]+}}#&quot;</span>, $this-&gt;_list_galleries_tpl1_code, $matches);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                                </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                        <span class="keywordflow">foreach</span>($gobjs as $g) {</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                                $row = $this-&gt;<a class="code" href="classmultimedia.html#a907f324d8f0130fa7299a945e69f0d50" title="Parserizzazione del template inserito da opzioni per la vista lista gallerie.">parseTemplate</a>($g, $this-&gt;_list_galleries_tpl1_code, $matches);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                                $rows[] = $row;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                        }</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                        $view-&gt;assign(<span class="stringliteral">&#39;rows&#39;</span>, $rows);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                }</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                elseif($this-&gt;_list_galleries_tpl == 2) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                        $view-&gt;setViewTpl(<span class="stringliteral">&#39;galleries_2&#39;</span>);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                        preg_match_all(<span class="stringliteral">&quot;#{{[^}]+}}#&quot;</span>, $this-&gt;_list_galleries_tpl2_code, $matches);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                        $i = 0;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                        $num_gobjs = count($gobjs);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                        $row = array();</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                        <span class="keywordflow">foreach</span>($gobjs as $g) {</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                $i++;</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                                $row_cell = $this-&gt;<a class="code" href="classmultimedia.html#a907f324d8f0130fa7299a945e69f0d50" title="Parserizzazione del template inserito da opzioni per la vista lista gallerie.">parseTemplate</a>($g, $this-&gt;_list_galleries_tpl2_code, $matches);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                                $row[] = $row_cell;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                                <span class="keywordflow">if</span>( ($i % $this-&gt;_list_galleries_tpl2_cols == 0) || ($num_gobjs == $i) ) {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                                        $rows[] = $row;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                                        $row = array();</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                                }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                        }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                        $heads = array();</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                        $view_table = <span class="keyword">new</span> view();</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                        $view_table-&gt;setViewTpl(<span class="stringliteral">&#39;table&#39;</span>);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                        $view_table-&gt;assign(<span class="stringliteral">&#39;class&#39;</span>, <span class="stringliteral">&#39;galleries&#39;</span>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                        $view_table-&gt;assign(<span class="stringliteral">&#39;caption&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                        $view_table-&gt;assign(<span class="stringliteral">&#39;heads&#39;</span>, $heads);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                        $view_table-&gt;assign(<span class="stringliteral">&#39;rows&#39;</span>, $rows);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                        $table = $view_table-&gt;render();</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                        $view-&gt;assign(<span class="stringliteral">&#39;table&#39;</span>, $table);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                }</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                $myform = <span class="keyword">new</span> form(<span class="stringliteral">&#39;form_search_galleries&#39;</span>, <span class="stringliteral">&#39;post&#39;</span>, <span class="keyword">false</span>, array(<span class="stringliteral">&#39;tblLayout&#39;</span>=&gt;<span class="keyword">false</span>));</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                $form_search = $myform-&gt;form($this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;galleries&#39;</span>), <span class="keyword">false</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                $form_search .= $myform-&gt;input(<span class="stringliteral">&#39;search_text&#39;</span>, <span class="stringliteral">&#39;text&#39;</span>, htmlInput($search_text), array(<span class="stringliteral">&#39;hint&#39;</span>=&gt;_(<span class="stringliteral">&#39;cerca nelle gallerie&#39;</span>), <span class="stringliteral">&#39;size&#39;</span>=&gt;20, <span class="stringliteral">&#39;maxlength&#39;</span>=&gt;40));</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                $form_search .= <span class="stringliteral">&#39;&amp;#160;&#39;</span>.$myform-&gt;input(<span class="stringliteral">&#39;submit_search&#39;</span>, <span class="stringliteral">&#39;submit&#39;</span>, _(<span class="stringliteral">&#39;cerca&#39;</span>), array(<span class="stringliteral">&#39;classField&#39;</span>=&gt;<span class="stringliteral">&#39;submit&#39;</span>));</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                $form_search .= <span class="stringliteral">&#39;&amp;#160;&#39;</span>.$myform-&gt;input(<span class="stringliteral">&#39;submit_search_all&#39;</span>, <span class="stringliteral">&#39;submit&#39;</span>, _(<span class="stringliteral">&#39;tutte&#39;</span>), array(<span class="stringliteral">&#39;classField&#39;</span>=&gt;<span class="stringliteral">&#39;submit&#39;</span>));</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                $form_search .= $myform-&gt;cform();</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                        </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;title&#39;</span>, $this-&gt;_title_list_galleries);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;form_search&#39;</span>, $form_search);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;search_text&#39;</span>, $search_text);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;section_id&#39;</span>, <span class="stringliteral">&#39;galleries_&#39;</span>.$this-&gt;_className.<span class="charliteral">&#39;_&#39;</span>.$this-&gt;_instanceName);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;pagination_summary&#39;</span>, $pagination-&gt;reassumedPrint());</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                $view-&gt;assign(<span class="stringliteral">&#39;pagination_navigation&#39;</span>, $pagination-&gt;listReferenceGINO($this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;galleries&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, null, array(<span class="stringliteral">&quot;basename&quot;</span>=&gt;<span class="keyword">false</span>))));</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                <span class="keywordflow">return</span> $view-&gt;render();</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div>
<div class="line"><a name="l01205"></a><span class="lineno"><a class="code" href="classmultimedia.html#afd0fc34dfd292cf01b8b334fb83a394c"> 1205</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#afd0fc34dfd292cf01b8b334fb83a394c" title="Setta in variabili di sessione i media ottenuti dalla ricerca e la ricerca stessa.">actionSearchMedia</a>($gallery) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                require_once(CLASSES_DIR.OS.<span class="stringliteral">&#39;class.search.php&#39;</span>);</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                $db = db::instance();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                $session = session::instance();</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                $search_string = cleanVar($_POST, <span class="stringliteral">&#39;search_text&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                $keywords = $this-&gt;<a class="code" href="classmultimedia.html#abffbfb0c717439c1b719a888f490ef50" title="Ritorna keywords di ricerca a partire da un stringa di ricerca.">getKeywords</a>($search_string);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                <span class="keywordflow">if</span>(!count($keywords) || isset($_POST[<span class="stringliteral">&#39;submit_search_all&#39;</span>])) {</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                        unset($session-&gt;multimedia_media_search_results);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                        unset($session-&gt;multimedia_media_search);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                }</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                $relevance_mname = <a class="code" href="classmultimedia.html#ac9ea8adc415c4b4fe81844ea63c0ca73">$this-&gt;_relevance_media_mname</a>;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                $relevance_mdescription = <a class="code" href="classmultimedia.html#ae21e3d77ac4d93957f81ac0af79702cf">$this-&gt;_relevance_media_mdescription</a>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                $relevance_mtags = <a class="code" href="classmultimedia.html#a5e05940d06b6a4e179e644cd9091f093">$this-&gt;_relevance_media_mtags</a>;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                        $private = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                }</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                        $private = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                $query = <span class="stringliteral">&quot;SELECT DISTINCT(m.id), &quot;</span>;</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                $relevance = <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                $i = 0;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                <span class="keywordflow">foreach</span>($keywords as $search_text) {</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                        <span class="keywordflow">if</span>($i) $relevance .= <span class="stringliteral">&quot; + &quot;</span>;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                        $i++;</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                        $relevance .= <span class="stringliteral">&quot; + IFNULL(</span></div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;<span class="stringliteral">                                ((m.name REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;) &gt; 0) * &quot;</span>.$relevance_mname.<span class="stringliteral">&quot;, 0</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                        $relevance .= <span class="stringliteral">&quot; + IFNULL(</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="stringliteral">                                ((m.description REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;) &gt; 0) * &quot;</span>.$relevance_mdescription.<span class="stringliteral">&quot;, 0</span></div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                        $relevance .= <span class="stringliteral">&quot; + IFNULL(</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="stringliteral">                                ((m.tags REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;) &gt; 0) * &quot;</span>.$relevance_mtags.<span class="stringliteral">&quot;, 0</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                }</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                $relevance .= <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    $query .= $relevance.<span class="stringliteral">&quot; AS relevance, &quot;</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                $occurences = <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                $i = 0;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                <span class="keywordflow">foreach</span>($keywords as $search_text) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                        <span class="keywordflow">if</span>($i) $occurences .= <span class="stringliteral">&quot; + &quot;</span>;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                        $i++;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                        $occurences .= <span class="stringliteral">&quot;+ IFNULL(</span></div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="stringliteral">                                ((LENGTH(m.name) - LENGTH(replace_ci(m.name, &#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;, &#39;&#39;)))/LENGTH(&#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;)), 0 </span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                        $occurences .= <span class="stringliteral">&quot;+ IFNULL(</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="stringliteral">                                ((LENGTH(m.description) - LENGTH(replace_ci(m.description, &#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;, &#39;&#39;)))/LENGTH(&#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;)), 0 </span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                        $occurences .= <span class="stringliteral">&quot;+ IFNULL(</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="stringliteral">                                ((LENGTH(m.tags) - LENGTH(replace_ci(m.tags, &#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;, &#39;&#39;)))/LENGTH(&#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;)), 0 </span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                }</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                $occurences .= <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    $query .= $occurences.<span class="stringliteral">&#39; AS occurences &#39;</span>;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                $query .= <span class="stringliteral">&quot;FROM &quot;</span>.multimediaItem::$tbl_item.<span class="stringliteral">&quot; AS m &quot;</span>;</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                $query .= <span class="stringliteral">&quot;WHERE m.galleries REGEXP &#39;[[:&lt;:]]&quot;</span>.$gallery-&gt;id.<span class="stringliteral">&quot;[[:&gt;:]]&#39; AND &quot;</span>;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                <span class="keywordflow">if</span>(!$private) {</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                        $query .= <span class="stringliteral">&quot;m.private = &#39;0&#39; AND &quot;</span>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                }</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                $query .= <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                $i = 0;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                <span class="keywordflow">foreach</span>($keywords as $search_text) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                        <span class="keywordflow">if</span>($i) $query .= <span class="stringliteral">&quot; OR &quot;</span>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                        $i++;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                        $query .= <span class="stringliteral">&quot;m.name REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39; OR &quot;</span>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                        $query .= <span class="stringliteral">&quot;m.description REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39; OR &quot;</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                        $query .= <span class="stringliteral">&quot;m.tags REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;&quot;</span>;</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                }</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                $query .= <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                $query .= <span class="stringliteral">&quot; ORDER BY (relevance + occurences) DESC&quot;</span>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                $rows = $db-&gt;selectquery($query);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                $results = array();</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                <span class="keywordflow">if</span>(count($rows)) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                        <span class="keywordflow">foreach</span>($rows as $row) {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                                $results[] = $row[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                        }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                $session-&gt;multimedia_media_search_results = $results;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;                $session-&gt;multimedia_media_search = $search_string;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        }</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;</div>
<div class="line"><a name="l01305"></a><span class="lineno"><a class="code" href="classmultimedia.html#acf171a1b80c41839e0cc57d21465df33"> 1305</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#acf171a1b80c41839e0cc57d21465df33" title="Setta in variabili di sessione le gallerie ottenute dalla ricerca e la ricerca stessa.">actionSearchGalleries</a>() {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                require_once(CLASSES_DIR.OS.<span class="stringliteral">&#39;class.search.php&#39;</span>);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                $db = db::instance();</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                $session = session::instance();</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                $search_string = cleanVar($_POST, <span class="stringliteral">&#39;search_text&#39;</span>, <span class="stringliteral">&#39;string&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                $keywords = $this-&gt;<a class="code" href="classmultimedia.html#abffbfb0c717439c1b719a888f490ef50" title="Ritorna keywords di ricerca a partire da un stringa di ricerca.">getKeywords</a>($search_string);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                <span class="keywordflow">if</span>(!count($keywords) || isset($_POST[<span class="stringliteral">&#39;submit_search_all&#39;</span>])) {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                        unset($session-&gt;multimedia_galleries_search_results);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                        unset($session-&gt;multimedia_galleries_search);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                $relevance_gname = <a class="code" href="classmultimedia.html#a7323edf49b95df4314f78b11a7b6c01b">$this-&gt;_relevance_gallery_gname</a>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                $relevance_gdescription = <a class="code" href="classmultimedia.html#adfed59f39e593a090c767cdbf1ba1d42">$this-&gt;_relevance_gallery_gdescription</a>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                $relevance_mname = <a class="code" href="classmultimedia.html#a56ed9f6adc62ee2d7f5c29847f73f371">$this-&gt;_relevance_gallery_mname</a>;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                $relevance_mdescription = <a class="code" href="classmultimedia.html#a02ba3737b052a222b9e41af3cfeecf74">$this-&gt;_relevance_gallery_mdescription</a>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                $relevance_mtags = <a class="code" href="classmultimedia.html#a3a5093baf605a47102c45245d82dbb82">$this-&gt;_relevance_gallery_mtags</a>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_2)) {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                        $private = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                }</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                        $private = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                $query = <span class="stringliteral">&quot;SELECT DISTINCT(g.id), &quot;</span>;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;                $relevance = <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                $i = 0;</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                <span class="keywordflow">foreach</span>($keywords as $search_text) {</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                        <span class="keywordflow">if</span>($i) $relevance .= <span class="stringliteral">&quot; + &quot;</span>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                        $i++;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                        $relevance .= <span class="stringliteral">&quot;IFNULL(</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="stringliteral">                                ((g.name REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;) &gt; 0) * &quot;</span>.$relevance_gname.<span class="stringliteral">&quot;, 0</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;                        $relevance .= <span class="stringliteral">&quot; + IFNULL(</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="stringliteral">                                ((g.description REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;) &gt; 0) * &quot;</span>.$relevance_gdescription.<span class="stringliteral">&quot;, 0</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;                        $relevance .= <span class="stringliteral">&quot; + SUM(IFNULL(</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="stringliteral">                                ((m.name REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;) &gt; 0) * &quot;</span>.$relevance_mname.<span class="stringliteral">&quot;, 0</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="stringliteral">                        ))&quot;</span>;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;                        $relevance .= <span class="stringliteral">&quot; + SUM(IFNULL(</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="stringliteral">                                ((m.description REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;) &gt; 0) * &quot;</span>.$relevance_mdescription.<span class="stringliteral">&quot;, 0</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="stringliteral">                        ))&quot;</span>;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                        $relevance .= <span class="stringliteral">&quot; + SUM(IFNULL(</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="stringliteral">                                ((m.tags REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;) &gt; 0) * &quot;</span>.$relevance_mtags.<span class="stringliteral">&quot;, 0</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="stringliteral">                        ))&quot;</span>;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                }</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                $relevance .= <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;    $query .= $relevance.<span class="stringliteral">&#39; AS relevance, &#39;</span>;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                $occurences = <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                $i = 0;</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;                <span class="keywordflow">foreach</span>($keywords as $search_text) {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                        <span class="keywordflow">if</span>($i) $occurences .= <span class="stringliteral">&quot; + &quot;</span>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                        $i++;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                        $occurences .= <span class="stringliteral">&quot;IFNULL(</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="stringliteral">                                ((LENGTH(g.name) - LENGTH(replace_ci(g.name, &#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;, &#39;&#39;)))/LENGTH(&#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;)), 0 </span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;                        $occurences .= <span class="stringliteral">&quot;+ IFNULL(</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="stringliteral">                                ((LENGTH(g.description) - LENGTH(replace_ci(g.description, &#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;, &#39;&#39;)))/LENGTH(&#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;)), 0 </span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="stringliteral">                        )&quot;</span>;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                        $occurences .= <span class="stringliteral">&quot;+ SUM(IFNULL(</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="stringliteral">                                ((LENGTH(m.name) - LENGTH(replace_ci(m.name, &#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;, &#39;&#39;)))/LENGTH(&#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;)), 0 </span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="stringliteral">                        ))&quot;</span>;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;                        $occurences .= <span class="stringliteral">&quot;+ SUM(IFNULL(</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="stringliteral">                                ((LENGTH(m.description) - LENGTH(replace_ci(m.description, &#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;, &#39;&#39;)))/LENGTH(&#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;)), 0 </span></div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="stringliteral">                        ))&quot;</span>;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                        $occurences .= <span class="stringliteral">&quot;+ SUM(IFNULL(</span></div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="stringliteral">                                ((LENGTH(m.tags) - LENGTH(replace_ci(m.tags, &#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;, &#39;&#39;)))/LENGTH(&#39;&quot;</span>.$search_text.<span class="stringliteral">&quot;&#39;)), 0 </span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="stringliteral">                        ))&quot;</span>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                }</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;                $occurences .= <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    $query .= $occurences.<span class="stringliteral">&#39; AS occurences &#39;</span>;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;                $query .= <span class="stringliteral">&quot;FROM &quot;</span>.multimediaGallery::$tbl_gallery.<span class="stringliteral">&quot; AS g, &quot;</span>.<a class="code" href="classmultimedia_item.html#a49d085fe122dba734da0321e77b74b96">multimediaItem::$tbl_item</a>.<span class="stringliteral">&quot; AS m &quot;</span>;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;                $query .= <span class="stringliteral">&quot;WHERE m.galleries REGEXP CONCAT(&#39;[[:&lt;:]]&#39;, g.id, &#39;[[:&gt;:]]&#39;) AND &quot;</span>;</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;                <span class="keywordflow">if</span>(!$private) {</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                        $query .= <span class="stringliteral">&quot;g.private = &#39;0&#39; AND &quot;</span>;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                        $query .= <span class="stringliteral">&quot;m.private = &#39;0&#39; AND &quot;</span>;</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                }</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                $query .= <span class="stringliteral">&quot;(&quot;</span>;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                $i = 0;</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                <span class="keywordflow">foreach</span>($keywords as $search_text) {</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                        <span class="keywordflow">if</span>($i) $query .= <span class="stringliteral">&quot; OR &quot;</span>;</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;                        $i++;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                        $query .= <span class="stringliteral">&quot;g.name REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39; OR &quot;</span>;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;                        $query .= <span class="stringliteral">&quot;g.description REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39; OR &quot;</span>;</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                        $query .= <span class="stringliteral">&quot;m.name REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39; OR &quot;</span>;</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                        $query .= <span class="stringliteral">&quot;m.description REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39; OR &quot;</span>;</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                        $query .= <span class="stringliteral">&quot;m.tags REGEXP &#39;[[:&lt;:]]&quot;</span>.$search_text.<span class="stringliteral">&quot;[[:&gt;:]]&#39;&quot;</span>;</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                }</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                $query .= <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                $query .= <span class="stringliteral">&quot; GROUP BY g.id ORDER BY (&quot;</span>.$relevance.<span class="stringliteral">&quot; + &quot;</span>.$occurences.<span class="stringliteral">&quot;) DESC&quot;</span>;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                $rows = $db-&gt;selectquery($query);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                $results = array();</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                <span class="keywordflow">if</span>(count($rows)) {</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;                        <span class="keywordflow">foreach</span>($rows as $row) {</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;                                $results[] = $row[<span class="stringliteral">&#39;id&#39;</span>];</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;                        }</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;                }</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                $session-&gt;multimedia_galleries_search_results = $results;</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                $session-&gt;multimedia_galleries_search = $search_string;</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        }</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div>
<div class="line"><a name="l01423"></a><span class="lineno"><a class="code" href="classmultimedia.html#abffbfb0c717439c1b719a888f490ef50"> 1423</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#abffbfb0c717439c1b719a888f490ef50" title="Ritorna keywords di ricerca a partire da un stringa di ricerca.">getKeywords</a>($search_string) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;                $clean_string = $this-&gt;<a class="code" href="classmultimedia.html#af22ee042c54af894c1738279035e4754" title="Rimuove da una stringa di ricerca le parole non significative.">clearSearchString</a>($search_string);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                $empty_array = array(<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                <span class="keywordflow">return</span>  array_diff(array_unique(explode(<span class="stringliteral">&quot; &quot;</span>, $clean_string)), $empty_array);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div>
<div class="line"><a name="l01439"></a><span class="lineno"><a class="code" href="classmultimedia.html#af22ee042c54af894c1738279035e4754"> 1439</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#af22ee042c54af894c1738279035e4754" title="Rimuove da una stringa di ricerca le parole non significative.">clearSearchString</a>($search_string) {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                $unconsidered = array(<span class="stringliteral">&quot;lo&quot;</span>, <span class="stringliteral">&quot;l&quot;</span>, <span class="stringliteral">&quot;il&quot;</span>, <span class="stringliteral">&quot;la&quot;</span>, <span class="stringliteral">&quot;i&quot;</span>, <span class="stringliteral">&quot;gli&quot;</span>, <span class="stringliteral">&quot;le&quot;</span>, <span class="stringliteral">&quot;uno&quot;</span>, <span class="stringliteral">&quot;un&quot;</span>, <span class="stringliteral">&quot;una&quot;</span>, <span class="stringliteral">&quot;un&quot;</span>, <span class="stringliteral">&quot;su&quot;</span>, <span class="stringliteral">&quot;sul&quot;</span>, <span class="stringliteral">&quot;sulla&quot;</span>, <span class="stringliteral">&quot;sullo&quot;</span>, <span class="stringliteral">&quot;sull&quot;</span>, <span class="stringliteral">&quot;in&quot;</span>, <span class="stringliteral">&quot;nel&quot;</span>, <span class="stringliteral">&quot;nello&quot;</span>, <span class="stringliteral">&quot;nella&quot;</span>, <span class="stringliteral">&quot;nell&quot;</span>, <span class="stringliteral">&quot;con&quot;</span>, <span class="stringliteral">&quot;di&quot;</span>, <span class="stringliteral">&quot;da&quot;</span>, <span class="stringliteral">&quot;dei&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>,  <span class="stringliteral">&quot;della&quot;</span>, <span class="stringliteral">&quot;dello&quot;</span>, <span class="stringliteral">&quot;del&quot;</span>, <span class="stringliteral">&quot;dell&quot;</span>, <span class="stringliteral">&quot;che&quot;</span>, <span class="stringliteral">&quot;a&quot;</span>, <span class="stringliteral">&quot;dal&quot;</span>, <span class="stringliteral">&quot;è&quot;</span>, <span class="stringliteral">&quot;e&quot;</span>, <span class="stringliteral">&quot;per&quot;</span>, <span class="stringliteral">&quot;non&quot;</span>, <span class="stringliteral">&quot;si&quot;</span>, <span class="stringliteral">&quot;al&quot;</span>, <span class="stringliteral">&quot;ai&quot;</span>, <span class="stringliteral">&quot;allo&quot;</span>, <span class="stringliteral">&quot;all&quot;</span>, <span class="stringliteral">&quot;al&quot;</span>, <span class="stringliteral">&quot;o&quot;</span>);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                $clean_string = strtolower($search_string);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;                $clean_string = preg_replace(<span class="stringliteral">&quot;#\b(&quot;</span>.implode(<span class="stringliteral">&quot;|&quot;</span>, $unconsidered).<span class="stringliteral">&quot;)\b#&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, $clean_string);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;                $clean_string = preg_replace(<span class="stringliteral">&quot;#\W|(\s+)#&quot;</span>, <span class="stringliteral">&quot; &quot;</span>, $clean_string);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;                $clean_string = preg_quote($clean_string);</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                <span class="keywordflow">return</span> $clean_string;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        }</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div>
<div class="line"><a name="l01461"></a><span class="lineno"><a class="code" href="classmultimedia.html#a907f324d8f0130fa7299a945e69f0d50"> 1461</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a907f324d8f0130fa7299a945e69f0d50" title="Parserizzazione del template inserito da opzioni per la vista lista gallerie.">parseTemplate</a>($gallery, $tpl, $matches) {</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                <span class="keywordflow">if</span>(isset($matches[0])) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                        <span class="keywordflow">foreach</span>($matches[0] as $m) {</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                                $code = trim(preg_replace(<span class="stringliteral">&quot;#{|}#&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, $m));</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                                <span class="keywordflow">if</span>($pos = strrpos($code, <span class="charliteral">&#39;|&#39;</span>)) {</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;                                        $property = substr($code, 0, $pos);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;                                        $filter = substr($code, $pos + 1);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;                                }</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;                                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                                        $property = $code;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                                        $filter = null;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;                                }</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                                $replace = $this-&gt;<a class="code" href="classmultimedia.html#a5d7f09bdb3ef2035afad3787987fc7a6" title="Replace di una proprietà di multimediGallery all&#39;interno del template.">replaceTplVar</a>($property, $filter, $gallery);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                                $tpl = preg_replace(<span class="stringliteral">&quot;#&quot;</span>.preg_quote($m).<span class="stringliteral">&quot;#&quot;</span>, $replace, $tpl);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                        } </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;                }</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;                <span class="keywordflow">return</span> $tpl;</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;        }</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div>
<div class="line"><a name="l01491"></a><span class="lineno"><a class="code" href="classmultimedia.html#a5d7f09bdb3ef2035afad3787987fc7a6"> 1491</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a5d7f09bdb3ef2035afad3787987fc7a6" title="Replace di una proprietà di multimediGallery all&#39;interno del template.">replaceTplVar</a>($property, $filter, $obj) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;                $pre_filter = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                <span class="keywordflow">if</span>($property == <span class="stringliteral">&#39;thumb&#39;</span>) {</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                        $pre_filter = <span class="stringliteral">&quot;&lt;img src=\&quot;&quot;</span>.$obj-&gt;thumbPath($this).<span class="stringliteral">&quot;\&quot; alt=\&quot;&quot;</span>.jsVar($obj-&gt;name).<span class="stringliteral">&quot;\&quot; /&gt;&quot;</span>;       </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;                }</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    elseif($property == <span class="stringliteral">&#39;thumb_url&#39;</span>) {</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                        $pre_filter = $obj-&gt;thumbPath($this);   </div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                }</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                elseif($property == <span class="stringliteral">&#39;last_edit_date&#39;</span> || $property == <span class="stringliteral">&#39;insertion_date&#39;</span>) {</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                        $pre_filter = date(<span class="stringliteral">&#39;d/m/Y&#39;</span>, strtotime($obj-&gt;{$property}));</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                }</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                elseif($property == <span class="stringliteral">&#39;description&#39;</span> || $property == <span class="stringliteral">&#39;name&#39;</span>) {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                        $pre_filter = htmlChars($obj-&gt;{$property});</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                }</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                }</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                <span class="keywordflow">if</span>(is_null($filter)) {</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                        <span class="keywordflow">return</span> $pre_filter;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;                }</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                <span class="keywordflow">if</span>($filter == <span class="stringliteral">&#39;link&#39;</span>) {</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_plink-&gt;aLink($this-&gt;_instanceName, <span class="stringliteral">&#39;gallery&#39;</span>, array(<span class="stringliteral">&#39;id&#39;</span>=&gt;$obj-&gt;slug)).<span class="stringliteral">&quot;\&quot;&gt;&quot;</span>.$pre_filter.<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                }</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                elseif(preg_match(<span class="stringliteral">&quot;#chars:(\d+)#&quot;</span>, $filter, $matches)) {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;                        <span class="keywordflow">return</span> cutHtmlText($pre_filter, $matches[1], <span class="stringliteral">&#39;...&#39;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">true</span>, array(<span class="stringliteral">&#39;endingPosition&#39;</span>=&gt;<span class="stringliteral">&#39;in&#39;</span>));</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                }</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    elseif(preg_match(<span class="stringliteral">&quot;#class:(.+)#&quot;</span>, $filter, $matches)) {</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;                        <span class="keywordflow">if</span>(isset($matches[1]) &amp;&amp; $property == <span class="stringliteral">&#39;thumb&#39;</span>) {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                                <span class="keywordflow">return</span> preg_replace(<span class="stringliteral">&quot;#&lt;img#&quot;</span>, <span class="stringliteral">&quot;&lt;img class=\&quot;&quot;</span>.$matches[1].<span class="stringliteral">&quot;\&quot;&quot;</span>, $pre_filter);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;                        }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">return</span> $pre_filter;</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                }</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;        }</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div>
<div class="line"><a name="l01535"></a><span class="lineno"><a class="code" href="classmultimedia.html#ad67043974f877c213f4e3978407747c8"> 1535</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#ad67043974f877c213f4e3978407747c8" title="Interfaccia di amministrazione del modulo.">manageDoc</a>() {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;                $this-&gt;accessGroup(<span class="stringliteral">&#39;ALL&#39;</span>);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;                        </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                $method = <span class="stringliteral">&#39;manageDoc&#39;</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;                $htmltab = <span class="keyword">new</span> htmlTab(array(<span class="stringliteral">&quot;linkPosition&quot;</span>=&gt;<span class="stringliteral">&#39;right&#39;</span>, <span class="stringliteral">&quot;title&quot;</span>=&gt;$this-&gt;_instanceLabel)); </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;                $link_admin = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=permissions\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Permessi&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                $link_css = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=css\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;CSS&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                $link_options = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=options\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Opzioni&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                $link_license = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=license\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Licenze&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                $link_video_platform = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=video_platform\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Piattaforme streaming video&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                $link_gallery = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=gallery\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Gallerie&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;                $link_slider = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=slider\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Slider&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;                $link_audio = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=audio\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Audio&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                $link_video = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[$this-&gt;_instanceName-$method]&amp;block=video\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Video&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                $link_dft = <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span>.$this-&gt;_home.<span class="stringliteral">&quot;?evt[&quot;</span>.$this-&gt;_instanceName.<span class="stringliteral">&quot;-$method]\&quot;&gt;&quot;</span>._(<span class="stringliteral">&quot;Immagini&quot;</span>).<span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;                </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                $sel_link = $link_dft;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;                <span class="comment">// Variables</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;                $id = cleanVar($_GET, <span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;int&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;                $start = cleanVar($_GET, <span class="stringliteral">&#39;start&#39;</span>, <span class="stringliteral">&#39;int&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;                <span class="comment">// end</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;                </div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&quot;/classroom.css&quot;</span>);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                <span class="keywordflow">if</span>($this-&gt;_block == <span class="stringliteral">&#39;css&#39;</span>) {</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                        $buffer = sysfunc::manageCss($this-&gt;_instance, $this-&gt;_className);              </div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                        $sel_link = $link_css;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                }</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;                elseif($this-&gt;_block == <span class="stringliteral">&#39;permissions&#39;</span> &amp;&amp; $this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)) {</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                        $buffer = sysfunc::managePermissions($this-&gt;_instance, $this-&gt;_className);              </div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                        $sel_link = $link_admin;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                elseif($this-&gt;_block == <span class="stringliteral">&#39;options&#39;</span> &amp;&amp; $this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)) {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                        $buffer = sysfunc::manageOptions($this-&gt;_instance, $this-&gt;_className);          </div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;                        $sel_link = $link_options;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                }</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;                elseif($this-&gt;_block == <span class="stringliteral">&#39;license&#39;</span> &amp;&amp; $this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)) {</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                        $buffer = $this-&gt;manageLicense();</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                        $sel_link = $link_license;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                }</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                elseif($this-&gt;_block == <span class="stringliteral">&#39;video_platform&#39;</span> &amp;&amp; $this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)) {</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                        $buffer = $this-&gt;manageVideoPlatform();</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                        $sel_link = $link_video_platform;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                }</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                elseif($this-&gt;_block == <span class="stringliteral">&#39;slider&#39;</span>) {</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                        $buffer = $this-&gt;manageSlider();</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                        $sel_link = $link_slider;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                elseif($this-&gt;_block == <span class="stringliteral">&#39;gallery&#39;</span>) {</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;                        $buffer = $this-&gt;manageGallery();</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                        $sel_link = $link_gallery;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                }</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                elseif($this-&gt;_block == <span class="stringliteral">&#39;audio&#39;</span>) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                        $buffer = $this-&gt;manageAudio();</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                        $sel_link = $link_audio;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                }</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                elseif($this-&gt;_block == <span class="stringliteral">&#39;video&#39;</span>) {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                        $buffer = $this-&gt;manageVideo();</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                        $sel_link = $link_video;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                }</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;                <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                        $buffer = $this-&gt;manageImage();</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                <span class="comment">// groups privileges</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                <span class="keywordflow">if</span>($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>)) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                        $links_array = array($link_admin, $link_css, $link_options, $link_license, $link_video_platform, $link_slider, $link_gallery, $link_audio, $link_video, $link_dft);</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                }</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                elseif($this-&gt;_access-&gt;AccessVerifyGroupIf($this-&gt;_className, $this-&gt;_instance, $this-&gt;_user_group, $this-&gt;_group_1)) {</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                        $links_array = array($link_gallery, $link_audio, $link_video, $link_dft);</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                }</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                <span class="keywordflow">else</span> $links_array = array($link_dft);</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                $htmltab-&gt;navigationLinks = $links_array;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                $htmltab-&gt;selectedLink = $sel_link;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                $htmltab-&gt;htmlContent = $buffer;</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                <span class="keywordflow">return</span> $htmltab-&gt;render();</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        }</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div>
<div class="line"><a name="l01624"></a><span class="lineno"><a class="code" href="classmultimedia.html#a82212b284055aea37d8b28b80fa79374"> 1624</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a82212b284055aea37d8b28b80fa79374" title="Interfaccia di amministrazione dello slider.">manageSlider</a>() {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                $slider = <a class="code" href="classmultimedia_slider.html#a533b9b96fb847db54994c7502f6a81d6" title="Istanze legate all&#39;stanza del controller.">multimediaSlider::getFromInstance</a>($this);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                $allow_insertion = $slider-&gt;id ? <span class="keyword">false</span> : <span class="keyword">true</span>;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                $admin_table = <span class="keyword">new</span> adminTable($this, array(<span class="stringliteral">&#39;allow_insertion&#39;</span>=&gt;$allow_insertion, <span class="stringliteral">&#39;delete_deny&#39;</span>=&gt;<span class="stringliteral">&#39;all&#39;</span>));</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;                $buffer = $admin_table-&gt;backOffice(</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                                <span class="stringliteral">&#39;multimediaSlider&#39;</span>, </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;                                array(</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                                        <span class="stringliteral">&#39;list_display&#39;</span> =&gt; array(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;gallery&#39;</span>, <span class="stringliteral">&#39;transition_effect&#39;</span>),</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                                        <span class="stringliteral">&#39;list_title&#39;</span>=&gt;_(<span class="stringliteral">&quot;Slider&quot;</span>), </div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                                        <span class="stringliteral">&#39;list_description&#39;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>._(<span class="stringliteral">&quot;E&#39; possibile configurare un solo slider&quot;</span>).<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>,</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                                     ),</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                                array(), </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                                array(</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                                        <span class="stringliteral">&#39;transition_effect&#39;</span> =&gt;array(</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                                                <span class="stringliteral">&#39;widget&#39;</span> =&gt; <span class="stringliteral">&#39;select&#39;</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;                                        )</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;                                )</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;                );</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                <span class="keywordflow">return</span> $buffer;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        }</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;</div>
<div class="line"><a name="l01656"></a><span class="lineno"><a class="code" href="classmultimedia.html#aad38c9bcba2b2c5f66338971e72e32db"> 1656</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#aad38c9bcba2b2c5f66338971e72e32db" title="Interfaccia di amministrazione dei media di tipo immagine.">manageImage</a>() {</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;                require_once(<span class="stringliteral">&#39;class.multimediaItemAdminTable.php&#39;</span>);</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&#39;/MooComplete.js&#39;</span>);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&#39;/MooComplete.css&#39;</span>);</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                $admin_table = <span class="keyword">new</span> <a class="code" href="classmultimedia_item_admin_table.html" title="Classe per la gestione del backoffice dei media (estensione della classe adminTable del core di GINO)...">multimediaItemAdminTable</a>($this, array());</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                $buffer = javascript::abiMapLib();</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;                $tags = <a class="code" href="classmultimedia_tag.html#a116f59168ec2f625c538081fcbf296e3" title="Restituisce una lista di tutti i tag presenti nella tabella.">multimediaTag::getAllList</a>($this-&gt;_instance, array(<span class="stringliteral">&#39;jsescape&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                $js_tags_list = <span class="stringliteral">&quot;[&#39;&quot;</span>.implode(<span class="stringliteral">&quot;&#39;,&#39;&quot;</span>, $tags).<span class="stringliteral">&quot;&#39;]&quot;</span>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;                </div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                $buffer .= <span class="stringliteral">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                $buffer .= <span class="stringliteral">&quot;function convert() {</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;<span class="stringliteral">                                var addressConverter = new AddressToPointConverter(&#39;map_coord&#39;, &#39;lat&#39;, &#39;lng&#39;, $(&#39;map_address&#39;).value, {&#39;canvasPosition&#39;:&#39;over&#39;});</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="stringliteral">                                addressConverter.showMap();</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="stringliteral">                        }\n&quot;</span>;</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;                $buffer .= <span class="stringliteral">&quot;window.addEvent(&#39;load&#39;, function() {</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="stringliteral">                        var tag_input = new MooComplete(&#39;tags&#39;, {</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;<span class="stringliteral">                                list: $js_tags_list, // elements to use to suggest.</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;<span class="stringliteral">                                mode: &#39;tag&#39;, // suggestion mode (tag | text)</span></div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="stringliteral">                                size: 5 // number of elements to suggest</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;<span class="stringliteral">                        });</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="stringliteral">                })&quot;</span>;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                $buffer .= <span class="stringliteral">&quot;&lt;/script&gt;&quot;</span>;</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                $onclick = <span class="stringliteral">&quot;onclick=\&quot;Asset.javascript(&#39;http://maps.google.com/maps/api/js?sensor=true&amp;callback=convert&#39;)\&quot;&quot;</span>;</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                $gform = <span class="keyword">new</span> Form(<span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;                $convert_button = $gform-&gt;input(<span class="stringliteral">&#39;map_coord&#39;</span>, <span class="stringliteral">&#39;button&#39;</span>, _(<span class="stringliteral">&quot;converti&quot;</span>), array(<span class="stringliteral">&quot;id&quot;</span>=&gt;<span class="stringliteral">&quot;map_coord&quot;</span>, <span class="stringliteral">&quot;classField&quot;</span>=&gt;<span class="stringliteral">&quot;generic&quot;</span>, <span class="stringliteral">&quot;js&quot;</span>=&gt;$onclick));               </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                $addCell = array(</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                        <span class="stringliteral">&#39;lat&#39;</span>=&gt;$gform-&gt;cinput(<span class="stringliteral">&#39;map_address&#39;</span>, <span class="stringliteral">&#39;text&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, array(_(<span class="stringliteral">&quot;Indirizzo localizzazione media&quot;</span>), _(<span class="stringliteral">&quot;es: torino, via mazzini 37&lt;br /&gt;utilizzare &#39;converti&#39; per calcolare latitudine e longitudine&quot;</span>)), array(<span class="stringliteral">&quot;size&quot;</span>=&gt;40, <span class="stringliteral">&quot;maxlength&quot;</span>=&gt;200, <span class="stringliteral">&quot;id&quot;</span>=&gt;<span class="stringliteral">&quot;map_address&quot;</span>, <span class="stringliteral">&quot;text_add&quot;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>.$convert_button.<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>))</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;                );</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                $buffer .= $admin_table-&gt;backOffice(</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                        <span class="stringliteral">&#39;multimediaImage&#39;</span>, </div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                        array(</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;                                <span class="stringliteral">&#39;list_display&#39;</span> =&gt; array(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;galleries&#39;</span>, <span class="stringliteral">&#39;published&#39;</span>, <span class="stringliteral">&#39;private&#39;</span>, <span class="stringliteral">&#39;tags&#39;</span>),</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;                                <span class="stringliteral">&#39;filter_fields&#39;</span>=&gt;array(<span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;galleries&#39;</span>, <span class="stringliteral">&#39;published&#39;</span>, <span class="stringliteral">&#39;private&#39;</span>, <span class="stringliteral">&#39;tags&#39;</span>), </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;                                <span class="stringliteral">&#39;list_title&#39;</span>=&gt;_(<span class="stringliteral">&quot;Elenco file immagine&quot;</span>), </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;                                <span class="stringliteral">&#39;list_description&#39;</span>=&gt;<span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                                <span class="stringliteral">&#39;list_where&#39;</span>=&gt;array(<span class="stringliteral">&quot;type=&#39;&quot;</span>.<a class="code" href="class__multimedia_8php.html#a4b1c2af05df3dd8c666bd40ae0fb4357">IMAGE_CHOICE</a>.<span class="stringliteral">&quot;&#39;&quot;</span>), </div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                             ),</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;                        array(</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;                                <span class="stringliteral">&#39;removeFields&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;                                        <span class="stringliteral">&#39;video_code&#39;</span>,</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;                                        <span class="stringliteral">&#39;video_platform&#39;</span>,</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;                                        <span class="stringliteral">&#39;video_width&#39;</span>,</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                                        <span class="stringliteral">&#39;video_height&#39;</span>,</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;                                        <span class="stringliteral">&#39;mpeg_filename&#39;</span>,</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                                        <span class="stringliteral">&#39;ogg_filename&#39;</span>,</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                                ),</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                                <span class="stringliteral">&#39;addCell&#39;</span> =&gt; $addCell</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                        ), </div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                        array(</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;                                <span class="stringliteral">&#39;description&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;                                        <span class="stringliteral">&#39;widget&#39;</span>=&gt;<span class="stringliteral">&#39;editor&#39;</span>, </div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                                        <span class="stringliteral">&#39;notes&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;                                        <span class="stringliteral">&#39;img_preview&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                                ),</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;                                <span class="stringliteral">&#39;tags&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;tags&#39;</span>,</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                                        <span class="stringliteral">&#39;size&#39;</span> =&gt; 60,</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                                        <span class="stringliteral">&#39;max_length&#39;</span> =&gt; 255</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                                ),</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                                <span class="stringliteral">&#39;thumb&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                                        <span class="stringliteral">&#39;preview&#39;</span> =&gt; <span class="keyword">true</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                                ),</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                                <span class="stringliteral">&#39;img_filename&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                                        <span class="stringliteral">&#39;preview&#39;</span> =&gt; <span class="keyword">true</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;                                ),</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;                                <span class="stringliteral">&#39;lat&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;lat&#39;</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;                                ),</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                                <span class="stringliteral">&#39;lng&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;lng&#39;</span></div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                                )</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                        )</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                );</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                <span class="keywordflow">return</span> $buffer;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;        }</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;</div>
<div class="line"><a name="l01745"></a><span class="lineno"><a class="code" href="classmultimedia.html#a9711ad9ce0e69e97427ad936715882be"> 1745</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a9711ad9ce0e69e97427ad936715882be" title="Interfaccia di amministrazione dei media di tipo video.">manageVideo</a>() {</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                require_once(<span class="stringliteral">&#39;class.multimediaItemAdminTable.php&#39;</span>);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&#39;/MooComplete.js&#39;</span>);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&#39;/MooComplete.css&#39;</span>);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                $admin_table = <span class="keyword">new</span> <a class="code" href="classmultimedia_item_admin_table.html" title="Classe per la gestione del backoffice dei media (estensione della classe adminTable del core di GINO)...">multimediaItemAdminTable</a>($this, array());</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                $buffer = javascript::abiMapLib();</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                $tags = <a class="code" href="classmultimedia_tag.html#a116f59168ec2f625c538081fcbf296e3" title="Restituisce una lista di tutti i tag presenti nella tabella.">multimediaTag::getAllList</a>($this-&gt;_instance, array(<span class="stringliteral">&#39;jsescape&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;                $js_tags_list = <span class="stringliteral">&quot;[&#39;&quot;</span>.implode(<span class="stringliteral">&quot;&#39;,&#39;&quot;</span>, $tags).<span class="stringliteral">&quot;&#39;]&quot;</span>;</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                </div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;                $buffer .= <span class="stringliteral">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                $buffer .= <span class="stringliteral">&quot;function convert() {</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="stringliteral">                                var addressConverter = new AddressToPointConverter(&#39;map_coord&#39;, &#39;lat&#39;, &#39;lng&#39;, $(&#39;map_address&#39;).value, {&#39;canvasPosition&#39;:&#39;over&#39;});</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="stringliteral">                                addressConverter.showMap();</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="stringliteral">                        }\n&quot;</span>;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                $buffer .= <span class="stringliteral">&quot;window.addEvent(&#39;load&#39;, function() {</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;<span class="stringliteral">                        var tag_input = new MooComplete(&#39;tags&#39;, {</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="stringliteral">                                list: $js_tags_list, // elements to use to suggest.</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;<span class="stringliteral">                                mode: &#39;tag&#39;, // suggestion mode (tag | text)</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="stringliteral">                                size: 5 // number of elements to suggest</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="stringliteral">                        });</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="stringliteral">                })&quot;</span>;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;                $buffer .= <span class="stringliteral">&quot;&lt;/script&gt;&quot;</span>;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                $onclick = <span class="stringliteral">&quot;onclick=\&quot;Asset.javascript(&#39;http://maps.google.com/maps/api/js?sensor=true&amp;callback=convert&#39;)\&quot;&quot;</span>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                $gform = <span class="keyword">new</span> Form(<span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                $convert_button = $gform-&gt;input(<span class="stringliteral">&#39;map_coord&#39;</span>, <span class="stringliteral">&#39;button&#39;</span>, _(<span class="stringliteral">&quot;converti&quot;</span>), array(<span class="stringliteral">&quot;id&quot;</span>=&gt;<span class="stringliteral">&quot;map_coord&quot;</span>, <span class="stringliteral">&quot;classField&quot;</span>=&gt;<span class="stringliteral">&quot;generic&quot;</span>, <span class="stringliteral">&quot;js&quot;</span>=&gt;$onclick));               </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                $addCell = array(</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                        <span class="stringliteral">&#39;lat&#39;</span>=&gt;$gform-&gt;cinput(<span class="stringliteral">&#39;map_address&#39;</span>, <span class="stringliteral">&#39;text&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, array(_(<span class="stringliteral">&quot;Indirizzo localizzazione media&quot;</span>), _(<span class="stringliteral">&quot;es: torino, via mazzini 37&lt;br /&gt;utilizzare &#39;converti&#39; per calcolare latitudine e longitudine&quot;</span>)), array(<span class="stringliteral">&quot;size&quot;</span>=&gt;40, <span class="stringliteral">&quot;maxlength&quot;</span>=&gt;200, <span class="stringliteral">&quot;id&quot;</span>=&gt;<span class="stringliteral">&quot;map_address&quot;</span>, <span class="stringliteral">&quot;text_add&quot;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>.$convert_button.<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>))</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                );</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                $buffer .= $admin_table-&gt;backOffice(</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                        <span class="stringliteral">&#39;multimediaVideo&#39;</span>, </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;                        array(</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                                <span class="stringliteral">&#39;list_display&#39;</span> =&gt; array(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;galleries&#39;</span>, <span class="stringliteral">&#39;published&#39;</span>, <span class="stringliteral">&#39;private&#39;</span>, <span class="stringliteral">&#39;video_code&#39;</span>, <span class="stringliteral">&#39;video_platform&#39;</span>, <span class="stringliteral">&#39;tags&#39;</span>),</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                                <span class="stringliteral">&#39;filter_fields&#39;</span>=&gt;array(<span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;galleries&#39;</span>, <span class="stringliteral">&#39;published&#39;</span>, <span class="stringliteral">&#39;private&#39;</span>, <span class="stringliteral">&#39;tags&#39;</span>), </div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                                <span class="stringliteral">&#39;list_title&#39;</span>=&gt;_(<span class="stringliteral">&quot;Elenco file video&quot;</span>), </div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                                <span class="stringliteral">&#39;list_description&#39;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>._(<span class="stringliteral">&#39;Ricordarsi di inserire la larghezza ed altezza del video per una corretta visualizzazione.&#39;</span>).<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>,</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                                <span class="stringliteral">&#39;list_where&#39;</span>=&gt;array(<span class="stringliteral">&quot;type=&#39;&quot;</span>.<a class="code" href="class__multimedia_8php.html#ae84beed6ddd37175866793d1b839b9ae">VIDEO_CHOICE</a>.<span class="stringliteral">&quot;&#39;&quot;</span>), </div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                             ),</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                        array(</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                                <span class="stringliteral">&#39;removeFields&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                                        <span class="stringliteral">&#39;img_filename&#39;</span>,</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                                        <span class="stringliteral">&#39;mpeg_filename&#39;</span>,</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;                                        <span class="stringliteral">&#39;ogg_filename&#39;</span>,</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;                                ),</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;                                <span class="stringliteral">&#39;addCell&#39;</span> =&gt; $addCell</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;                        ), </div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                        array(</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;                                <span class="stringliteral">&#39;description&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;                                        <span class="stringliteral">&#39;widget&#39;</span>=&gt;<span class="stringliteral">&#39;editor&#39;</span>, </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;                                        <span class="stringliteral">&#39;notes&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;                                        <span class="stringliteral">&#39;img_preview&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                                ),</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                                <span class="stringliteral">&#39;tags&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;tags&#39;</span>,</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;                                        <span class="stringliteral">&#39;size&#39;</span> =&gt; 60,</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;                                        <span class="stringliteral">&#39;max_length&#39;</span> =&gt; 255</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                                ),</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                                <span class="stringliteral">&#39;thumb&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;                                        <span class="stringliteral">&#39;preview&#39;</span> =&gt; <span class="keyword">true</span></div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;                                ),</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                                <span class="stringliteral">&#39;lat&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;lat&#39;</span></div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;                                ),</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;                                <span class="stringliteral">&#39;lng&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;lng&#39;</span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                                )</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;                        )</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                );</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                <span class="keywordflow">return</span> $buffer;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;        }</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;</div>
<div class="line"><a name="l01828"></a><span class="lineno"><a class="code" href="classmultimedia.html#aec16547e5bd05afea716990bf2da6229"> 1828</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#aec16547e5bd05afea716990bf2da6229" title="Interfaccia di amministrazione dei media di tipo audio.">manageAudio</a>() {</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                require_once(<span class="stringliteral">&#39;class.multimediaItemAdminTable.php&#39;</span>);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&#39;/MooComplete.js&#39;</span>);</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                $registry-&gt;addCss($this-&gt;_class_www.<span class="stringliteral">&#39;/MooComplete.css&#39;</span>);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                $admin_table = <span class="keyword">new</span> <a class="code" href="classmultimedia_item_admin_table.html" title="Classe per la gestione del backoffice dei media (estensione della classe adminTable del core di GINO)...">multimediaItemAdminTable</a>($this, array());</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                $buffer = javascript::abiMapLib();</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;                $tags = <a class="code" href="classmultimedia_tag.html#a116f59168ec2f625c538081fcbf296e3" title="Restituisce una lista di tutti i tag presenti nella tabella.">multimediaTag::getAllList</a>($this-&gt;_instance, array(<span class="stringliteral">&#39;jsescape&#39;</span>=&gt;<span class="keyword">true</span>));</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                $js_tags_list = <span class="stringliteral">&quot;[&#39;&quot;</span>.implode(<span class="stringliteral">&quot;&#39;,&#39;&quot;</span>, $tags).<span class="stringliteral">&quot;&#39;]&quot;</span>;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;                </div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                $buffer .= <span class="stringliteral">&quot;&lt;script type=\&quot;text/javascript\&quot;&gt;&quot;</span>;</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                $buffer .= <span class="stringliteral">&quot;function convert() {</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="stringliteral">                                var addressConverter = new AddressToPointConverter(&#39;map_coord&#39;, &#39;lat&#39;, &#39;lng&#39;, $(&#39;map_address&#39;).value, {&#39;canvasPosition&#39;:&#39;over&#39;});</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="stringliteral">                                addressConverter.showMap();</span></div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;<span class="stringliteral">                        }\n&quot;</span>;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                $buffer .= <span class="stringliteral">&quot;window.addEvent(&#39;load&#39;, function() {</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="stringliteral">                        var tag_input = new MooComplete(&#39;tags&#39;, {</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="stringliteral">                                list: $js_tags_list, // elements to use to suggest.</span></div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="stringliteral">                                mode: &#39;tag&#39;, // suggestion mode (tag | text)</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="stringliteral">                                size: 5 // number of elements to suggest</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;<span class="stringliteral">                        });</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;<span class="stringliteral">                })&quot;</span>;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                $buffer .= <span class="stringliteral">&quot;&lt;/script&gt;&quot;</span>;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                $onclick = <span class="stringliteral">&quot;onclick=\&quot;Asset.javascript(&#39;http://maps.google.com/maps/api/js?sensor=true&amp;callback=convert&#39;)\&quot;&quot;</span>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;                $gform = <span class="keyword">new</span> Form(<span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                $convert_button = $gform-&gt;input(<span class="stringliteral">&#39;map_coord&#39;</span>, <span class="stringliteral">&#39;button&#39;</span>, _(<span class="stringliteral">&quot;converti&quot;</span>), array(<span class="stringliteral">&quot;id&quot;</span>=&gt;<span class="stringliteral">&quot;map_coord&quot;</span>, <span class="stringliteral">&quot;classField&quot;</span>=&gt;<span class="stringliteral">&quot;generic&quot;</span>, <span class="stringliteral">&quot;js&quot;</span>=&gt;$onclick));               </div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                $addCell = array(</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;                        <span class="stringliteral">&#39;lat&#39;</span>=&gt;$gform-&gt;cinput(<span class="stringliteral">&#39;map_address&#39;</span>, <span class="stringliteral">&#39;text&#39;</span>, <span class="stringliteral">&#39;&#39;</span>, array(_(<span class="stringliteral">&quot;Indirizzo localizzazione media&quot;</span>), _(<span class="stringliteral">&quot;es: torino, via mazzini 37&lt;br /&gt;utilizzare &#39;converti&#39; per calcolare latitudine e longitudine&quot;</span>)), array(<span class="stringliteral">&quot;size&quot;</span>=&gt;40, <span class="stringliteral">&quot;maxlength&quot;</span>=&gt;200, <span class="stringliteral">&quot;id&quot;</span>=&gt;<span class="stringliteral">&quot;map_address&quot;</span>, <span class="stringliteral">&quot;text_add&quot;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>.$convert_button.<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>))</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;                );</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;                $buffer .= $admin_table-&gt;backOffice(</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;                        <span class="stringliteral">&#39;multimediaAudio&#39;</span>, </div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;                        array(</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;                                <span class="stringliteral">&#39;list_display&#39;</span> =&gt; array(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;galleries&#39;</span>, <span class="stringliteral">&#39;published&#39;</span>, <span class="stringliteral">&#39;private&#39;</span>, <span class="stringliteral">&#39;mpeg_filename&#39;</span>, <span class="stringliteral">&#39;ogg_filename&#39;</span>, <span class="stringliteral">&#39;tags&#39;</span>),</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                                <span class="stringliteral">&#39;filter_fields&#39;</span>=&gt;array(<span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;galleries&#39;</span>, <span class="stringliteral">&#39;published&#39;</span>, <span class="stringliteral">&#39;private&#39;</span>, <span class="stringliteral">&#39;tags&#39;</span>), </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                                <span class="stringliteral">&#39;list_title&#39;</span>=&gt;_(<span class="stringliteral">&quot;Elenco file audio&quot;</span>), </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;                                <span class="stringliteral">&#39;list_description&#39;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>._(<span class="stringliteral">&#39;Si consgilia di caricare i contenuti audio in due formati, mp3 ed ogg, per garantire la visualizzazione su diversi browser.&#39;</span>).<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>,</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                                <span class="stringliteral">&#39;list_where&#39;</span>=&gt;array(<span class="stringliteral">&quot;type=&#39;&quot;</span>.<a class="code" href="class__multimedia_8php.html#a3c73713ac6b7171048f04f324889ce51" title="Caratteristiche, opzioni configurabili da backoffice ed output disponibili per i template e le voci d...">AUDIO_CHOICE</a>.<span class="stringliteral">&quot;&#39;&quot;</span>), </div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                             ),</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;                        array(</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                                <span class="stringliteral">&#39;removeFields&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                                        <span class="stringliteral">&#39;img_filename&#39;</span>,</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;                                        <span class="stringliteral">&#39;video_code&#39;</span>,</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                                        <span class="stringliteral">&#39;video_platform&#39;</span>,</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                                        <span class="stringliteral">&#39;video_width&#39;</span>,</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;                                        <span class="stringliteral">&#39;video_height&#39;</span>,</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                                ),</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                                <span class="stringliteral">&#39;addCell&#39;</span> =&gt; $addCell</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;                        ), </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                        array(</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                                <span class="stringliteral">&#39;description&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;                                        <span class="stringliteral">&#39;widget&#39;</span>=&gt;<span class="stringliteral">&#39;editor&#39;</span>, </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                                        <span class="stringliteral">&#39;notes&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                                        <span class="stringliteral">&#39;img_preview&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;                                ),</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                                <span class="stringliteral">&#39;tags&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;tags&#39;</span>,</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                                        <span class="stringliteral">&#39;size&#39;</span> =&gt; 60,</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                                        <span class="stringliteral">&#39;max_length&#39;</span> =&gt; 255</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;                                ),</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;                                <span class="stringliteral">&#39;thumb&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;                                        <span class="stringliteral">&#39;preview&#39;</span> =&gt; <span class="keyword">true</span></div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;                                ),</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;                                <span class="stringliteral">&#39;lat&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;lat&#39;</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                                ),</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;                                <span class="stringliteral">&#39;lng&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;lng&#39;</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                                )</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                        )</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                );</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                <span class="keywordflow">return</span> $buffer;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;        }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div>
<div class="line"><a name="l01913"></a><span class="lineno"><a class="code" href="classmultimedia.html#ab8562e4c8af79ade862931543ea9f161"> 1913</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#ab8562e4c8af79ade862931543ea9f161" title="Interfaccia amministrativa per la gestione di gallerie.">manageGallery</a>() {</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;                </div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;                $registry = registry::instance();</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                $registry-&gt;addJs($this-&gt;_class_www.<span class="stringliteral">&#39;/multimedia.js&#39;</span>);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;                $admin_table = <span class="keyword">new</span> adminTable($this, array());</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    $edit = cleanVar($_GET, <span class="stringliteral">&#39;edit&#39;</span>, <span class="stringliteral">&#39;int&#39;</span>, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    $name_onblur = !$edit </div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      ? <span class="stringliteral">&quot;onblur=\&quot;$(&#39;slug&#39;).value = $(this).value.slugify()\&quot;&quot;</span></div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                $buffer = $admin_table-&gt;backOffice(</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                        <span class="stringliteral">&#39;multimediaGallery&#39;</span>, </div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                        array(</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                                <span class="stringliteral">&#39;list_display&#39;</span> =&gt; array(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;thumb&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;slug&#39;</span>, <span class="stringliteral">&#39;published&#39;</span>, <span class="stringliteral">&#39;private&#39;</span>, <span class="stringliteral">&#39;last_edit_date&#39;</span>, <span class="stringliteral">&#39;promoted&#39;</span>),</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                                <span class="stringliteral">&#39;list_title&#39;</span>=&gt;_(<span class="stringliteral">&quot;Elenco gallerie multimediali&quot;</span>), </div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                                <span class="stringliteral">&#39;list_description&#39;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>._(<span class="stringliteral">&#39;Ciascun media inserito potrà essere associato ad una o più gallerie multimediali qui definite.&#39;</span>).<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>,</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                             ),</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                        array(), </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                        array(</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                                <span class="stringliteral">&#39;name&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;                                        <span class="stringliteral">&#39;js&#39;</span> =&gt; $name_onblur</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;                                ),</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;                                <span class="stringliteral">&#39;slug&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;                                        <span class="stringliteral">&#39;id&#39;</span> =&gt; <span class="stringliteral">&#39;slug&#39;</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;                                ),</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;                                <span class="stringliteral">&#39;description&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;                                        <span class="stringliteral">&#39;widget&#39;</span>=&gt;<span class="stringliteral">&#39;editor&#39;</span>, </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;                                        <span class="stringliteral">&#39;notes&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                                        <span class="stringliteral">&#39;img_preview&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;                                ),</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;                                <span class="stringliteral">&#39;thumb&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;                                        <span class="stringliteral">&#39;preview&#39;</span> =&gt; <span class="keyword">true</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                                ),</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;                        )</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                );</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;                <span class="keywordflow">return</span> $buffer;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;        }</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div>
<div class="line"><a name="l01960"></a><span class="lineno"><a class="code" href="classmultimedia.html#a65791bdcec73d2f5787771405095a256"> 1960</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a65791bdcec73d2f5787771405095a256" title="Interfaccia amministrativa per la gestione di piattaforme video.">manageVideoPlatform</a>() {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;                $admin_table = <span class="keyword">new</span> adminTable($this, array());</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                </div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                $buffer = $admin_table-&gt;backOffice(</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;                        <span class="stringliteral">&#39;multimediaVideoPlatform&#39;</span>, </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                        array(</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                                <span class="stringliteral">&#39;list_display&#39;</span> =&gt; array(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;base_url&#39;</span>),</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;                                <span class="stringliteral">&#39;filter_fields&#39;</span>=&gt;array(<span class="stringliteral">&#39;name&#39;</span>), </div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                                <span class="stringliteral">&#39;list_title&#39;</span>=&gt;_(<span class="stringliteral">&quot;Elenco piattaform streaming video&quot;</span>), </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                                <span class="stringliteral">&#39;list_description&#39;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>._(<span class="stringliteral">&#39;Le seguenti piattaforme possono essere utilizzate per inserire contenuti multimediali video. I video vengono caricati dentro ad un iframe che richiama l\&#39;url base qui definito cui viene concatenato il codice video. Attualmente lo script js moogallery che gestisce la visualizzazione dei media supporta youtube e vimeo (i nomi delle piattaforme video devono essere esattamente questi). In caso di aggiunte modificare lo script moogallery.js.&#39;</span>).<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>,</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;                        ),</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                        array(), </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;                        array()</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;                );</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                </div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;                <span class="keywordflow">return</span> $buffer;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;        }</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div>
<div class="line"><a name="l01984"></a><span class="lineno"><a class="code" href="classmultimedia.html#a4730e16a7eb5f94ba696c2366e1ecb87"> 1984</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">function</span> <a class="code" href="classmultimedia.html#a4730e16a7eb5f94ba696c2366e1ecb87" title="Interfaccia amministrativa per la gestione di licenze.">manageLicense</a>() {</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;                $admin_table = <span class="keyword">new</span> adminTable($this, array());</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;                </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                $buffer = $admin_table-&gt;backOffice(</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                        <span class="stringliteral">&#39;multimediaLicense&#39;</span>, </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;                        array(</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;                                <span class="stringliteral">&#39;list_display&#39;</span> =&gt; array(<span class="stringliteral">&#39;id&#39;</span>, <span class="stringliteral">&#39;name&#39;</span>, <span class="stringliteral">&#39;url&#39;</span>),</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                                <span class="stringliteral">&#39;filter_fields&#39;</span>=&gt;array(<span class="stringliteral">&#39;name&#39;</span>), </div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;                                <span class="stringliteral">&#39;list_title&#39;</span>=&gt;_(<span class="stringliteral">&quot;Elenco licenze&quot;</span>), </div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                                <span class="stringliteral">&#39;list_description&#39;</span>=&gt;<span class="stringliteral">&quot;&lt;p&gt;&quot;</span>._(<span class="stringliteral">&#39;Le seguenti licenze sono associabili ai media inseriti&#39;</span>).<span class="stringliteral">&quot;&lt;/p&gt;&quot;</span>,</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                        ),</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;                        array(), </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;                        array(</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                                <span class="stringliteral">&#39;description&#39;</span> =&gt; array(</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;                                        <span class="stringliteral">&#39;widget&#39;</span>=&gt;<span class="stringliteral">&#39;editor&#39;</span>, </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;                                        <span class="stringliteral">&#39;notes&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;                                        <span class="stringliteral">&#39;img_preview&#39;</span>=&gt;<span class="keyword">false</span>, </div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;                                )</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;                        )</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;                );</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                <span class="keywordflow">return</span> $buffer;</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        }</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;} </div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;?&gt;</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generato Ven 1 Mar 2013 16:32:28 per Gino Multimedia da &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
